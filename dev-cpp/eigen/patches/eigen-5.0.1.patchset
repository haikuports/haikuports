From c748140f06643a776e68b7f4a804a00542435212 Mon Sep 17 00:00:00 2001
From: Calvin Hill <calvin@hakobaito.co.uk>
Date: Mon, 1 May 2017 04:17:23 +0100
Subject: Eigen patch to run tests for Haiku


diff --git a/unsupported/Eigen/src/SparseExtra/MatrixMarketIterator.h b/unsupported/Eigen/src/SparseExtra/MatrixMarketIterator.h
index 15d7fb2..1f456ad 100644
--- a/unsupported/Eigen/src/SparseExtra/MatrixMarketIterator.h
+++ b/unsupported/Eigen/src/SparseExtra/MatrixMarketIterator.h
@@ -171,10 +171,13 @@ class MatrixMarketIterator {
       std::string curfile;
       curfile = m_folder + "/" + m_curs_id->d_name;
       // Discard if it is a folder
+#ifndef __HAIKU__
       if (m_curs_id->d_type == DT_DIR) continue;  // FIXME This may not be available on non BSD systems
-      //         struct stat st_buf;
-      //         stat (curfile.c_str(), &st_buf);
-      //         if (S_ISDIR(st_buf.st_mode)) continue;
+#else
+         struct stat st_buf;
+         stat (curfile.c_str(), &st_buf);
+         if (S_ISDIR(st_buf.st_mode)) continue;
+#endif
 
       // Determine from the header if it is a matrix or a right hand side
       bool isvector, iscomplex = false;
-- 
2.51.0

