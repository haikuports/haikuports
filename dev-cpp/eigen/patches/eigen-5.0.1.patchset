From d3135623cada80c2fa6f2b3628db1456431bb16b Mon Sep 17 00:00:00 2001
From: Calvin Hill <calvin@hakobaito.co.uk>
Date: Mon, 1 May 2017 04:17:23 +0100
Subject: Eigen patch to run tests for Haiku


diff --git a/unsupported/Eigen/src/SparseExtra/MatrixMarketIterator.h b/unsupported/Eigen/src/SparseExtra/MatrixMarketIterator.h
index 15d7fb2..1f456ad 100644
--- a/unsupported/Eigen/src/SparseExtra/MatrixMarketIterator.h
+++ b/unsupported/Eigen/src/SparseExtra/MatrixMarketIterator.h
@@ -171,10 +171,13 @@ class MatrixMarketIterator {
       std::string curfile;
       curfile = m_folder + "/" + m_curs_id->d_name;
       // Discard if it is a folder
+#ifndef __HAIKU__
       if (m_curs_id->d_type == DT_DIR) continue;  // FIXME This may not be available on non BSD systems
-      //         struct stat st_buf;
-      //         stat (curfile.c_str(), &st_buf);
-      //         if (S_ISDIR(st_buf.st_mode)) continue;
+#else
+         struct stat st_buf;
+         stat (curfile.c_str(), &st_buf);
+         if (S_ISDIR(st_buf.st_mode)) continue;
+#endif
 
       // Determine from the header if it is a matrix or a right hand side
       bool isvector, iscomplex = false;
-- 
2.51.0


From ecf5e965965b98354480ab9aa1e98fff8aa0ef15 Mon Sep 17 00:00:00 2001
From: Luc Schrijvers <begasus@gmail.com>
Date: Thu, 13 Nov 2025 12:46:20 +0100
Subject: Fix library installation path


diff --git a/blas/CMakeLists.txt b/blas/CMakeLists.txt
index 45488d7..659eb9c 100644
--- a/blas/CMakeLists.txt
+++ b/blas/CMakeLists.txt
@@ -33,8 +33,8 @@ foreach(target IN LISTS EIGEN_BLAS_TARGETS)
   add_dependencies(blas ${target})
   install(TARGETS ${target}
           RUNTIME DESTINATION bin
-          LIBRARY DESTINATION lib
-          ARCHIVE DESTINATION lib)
+          LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
+          ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR})
 endforeach()
 
 if(EIGEN_BUILD_TESTING)
diff --git a/lapack/CMakeLists.txt b/lapack/CMakeLists.txt
index d837fff..6dd0884 100644
--- a/lapack/CMakeLists.txt
+++ b/lapack/CMakeLists.txt
@@ -122,8 +122,8 @@ foreach(target IN LISTS EIGEN_LAPACK_TARGETS)
   add_dependencies(lapack ${target})
   install(TARGETS ${target}
           RUNTIME DESTINATION bin
-          LIBRARY DESTINATION lib
-          ARCHIVE DESTINATION lib)
+          LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
+          ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR})
 endforeach()
 
 
-- 
2.51.0

