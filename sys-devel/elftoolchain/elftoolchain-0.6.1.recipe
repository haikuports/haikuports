SUMMARY="BSD-licensed replacement for some of the GNU binutils"
DESCRIPTION="elftoolchain is an attempt to provide the full set of tools \
required for the creation and manipulation of object files in the popular \
ELF format. It operates using a common library, so additional tools that \
operate on ELF files can be implemented easily. elftoolchain is part of the \
larger BSD Toolchain Project, which aims to make the entire C/C++ compilation \
process which is usually driven by copyleft GNU tools available under a \
permissive license. Besides the ELF Tool Chain Project, the BSD Toolchain \
project includes ClangBSD, libc++ and libcxxrt."
HOMEPAGE="http://sourceforge.net/project/elftoolchain"
COPYRIGHT="2001 Jake Burkholder
	2003 David O'Brien
	2006, 2008, 2010-2011 Joseph Koshy
	2007 S.Sam Arun Raj
	2007 John Birrell
	2007 Tim Kientzle
	2008 Hyogeol Lee
	2009, 2010 Kai Wang"
LICENSE="BSD (2-clause)"
REVISION="1"
SOURCE_URI="http://sourceforge.net/projects/elftoolchain/files/Sources/elftoolchain-0.6.1/elftoolchain-0.6.1.tar.bz2"
CHECKSUM_SHA256="a3e0c11ed9b0fe2f40b687b11849e7d52cb6675ebc60745c85d37a3ae4272cab"
PATCHES="elftoolchain-0.6.1.patchset"

# How borken this recipe is depends on how Haiku ticket #12617 turns out
ARCHITECTURES="!x86_gcc2 !x86 !x86_64"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	elftoolchain$secondaryArchSuffix = $portVersion
	cmd:ar$secondaryArchSuffix = $portVersion
	cmd:brandelf$secondaryArchSuffix = $portVersion
	cmd:c++filt$secondaryArchSuffix = $portVersion
	cmd:elfdump$secondaryArchSuffix = $portVersion
	cmd:isa$secondaryArchSuffix = $portVersion
	cmd:ld$secondaryArchSuffix = $portVersion
	cmd:nm$secondaryArchSuffix = $portVersion
	cmd:mcs$secondaryArchSuffix = $portVersion
	cmd:ranlib$secondaryArchSuffix = $portVersion
	cmd:size$secondaryArchSuffix = $portVersion
	cmd:strings$secondaryArchSuffix = $portVersion
	cmd:strip$secondaryArchSuffix = $portVersion
	cmd:addr2line$secondaryArchSuffix = $portVersion
	cmd:elfcopy$secondaryArchSuffix = $portVersion
	cmd:findtextrel$secondaryArchSuffix = $portVersion
	cmd:objdump$secondaryArchSuffix = $portVersion
	cmd:readelf$secondaryArchSuffix = $portVersion
	lib:libdwarf$secondaryArchSuffix = 3
	lib:libelf$secondaryArchSuffix = 1
	lib:libelftc$secondaryArchSuffix = 1
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libarchive$secondaryArchSuffix
	"

PROVIDES_devel="
	elftoolchain${secondaryArchSuffix}_devel = $portVersion
	devel:libdwarf$secondaryArchSuffix = 3
	devel:libelf$secondaryArchSuffix = 1
	devel:libelftc$secondaryArchSuffix = 1
	"
REQUIRES_devel="
	elftoolchain$secondaryArchSuffix == $portVersion base
	haiku$secondaryArchSuffix
	"

BUILD_REQUIRES="
	devel:libarchive$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	haiku${secondaryArchSuffix}_devel
	cmd:awk
	cmd:bmake
	cmd:flex
	cmd:gcc$secondaryArchSuffix
	cmd:nroff
	cmd:sed
	cmd:yacc
	"

BUILD()
{
	bmake
}

INSTALL()
{
	# TODO
	sleep 0
}
