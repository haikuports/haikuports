From 05efbbcd98216cc10ed2dc538c31c12f2c233523 Mon Sep 17 00:00:00 2001
From: Gerasim Troeglazov <3dEyes@gmail.com>
Date: Wed, 11 May 2022 19:29:57 +1000
Subject: Fix build for x86


diff --git a/generators/tiff/generator_tiff.cpp b/generators/tiff/generator_tiff.cpp
index ab7073c..33fcaaa 100644
--- a/generators/tiff/generator_tiff.cpp
+++ b/generators/tiff/generator_tiff.cpp
@@ -240,7 +240,7 @@ QImage TIFFGenerator::image(Okular::PixmapRequest *request)
         }
 
         QImage img(width, height, QImage::Format_RGB32);
-        uint32_t *data = reinterpret_cast<uint32_t *>(img.bits());
+        uint32 *data = reinterpret_cast<uint32 *>(img.bits());
 
         // read data
         if (TIFFReadRGBAImageOriented(d->tiff, width, height, data, orientation) != 0) {
@@ -365,7 +365,7 @@ Okular::Document::PrintError TIFFGenerator::print(QPrinter &printer)
         }
 
         QImage printImage(width, height, QImage::Format_RGB32);
-        uint32_t *data = reinterpret_cast<uint32_t *>(printImage.bits());
+        uint32 *data = reinterpret_cast<uint32 *>(printImage.bits());
 
         // read data
         if (TIFFReadRGBAImageOriented(d->tiff, width, height, data, ORIENTATION_TOPLEFT) != 0) {
-- 
2.50.1


From 76b418b5553792d1c6b654d834fb2849609e2fe8 Mon Sep 17 00:00:00 2001
From: Luc Schrijvers <begasus@gmail.com>
Date: Tue, 25 Mar 2025 09:18:34 +0100
Subject: Use system colors/icons


diff --git a/part/part.cpp b/part/part.cpp
index 6f5e49f..8741ab6 100644
--- a/part/part.cpp
+++ b/part/part.cpp
@@ -845,9 +845,11 @@ void Part::setupActions()
 {
     KActionCollection *ac = actionCollection();
 
+#ifndef Q_OS_HAIKU
     auto manager = new KColorSchemeManager(this);
     KActionMenu *schemeMenu = KColorSchemeMenu::createMenu(manager, this);
     ac->addAction(QStringLiteral("colorscheme_menu"), schemeMenu->menu()->menuAction());
+#endif
 
     m_copy = KStandardAction::create(KStandardAction::Copy, m_pageView, SLOT(copyTextSelection()), ac);
 
diff --git a/shell/main.cpp b/shell/main.cpp
index d98af8c..aa15f8b 100644
--- a/shell/main.cpp
+++ b/shell/main.cpp
@@ -37,7 +37,9 @@ int main(int argc, char **argv)
      * trigger initialisation of proper icon theme
      */
 #if KICONTHEMES_VERSION >= QT_VERSION_CHECK(6, 3, 0)
+#ifndef Q_OS_HAIKU
     KIconTheme::initTheme();
+#endif
 #endif
 
     /**
-- 
2.50.1

