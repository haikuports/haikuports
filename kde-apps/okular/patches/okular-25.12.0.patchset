From de86bea52ca5cdc11a5ecff20f46aee0b40d32d6 Mon Sep 17 00:00:00 2001
From: Gerasim Troeglazov <3dEyes@gmail.com>
Date: Wed, 11 May 2022 19:29:57 +1000
Subject: Fix build for x86


diff --git a/generators/tiff/generator_tiff.cpp b/generators/tiff/generator_tiff.cpp
index 310ae3e..0cf8025 100644
--- a/generators/tiff/generator_tiff.cpp
+++ b/generators/tiff/generator_tiff.cpp
@@ -239,7 +239,7 @@ QImage TIFFGenerator::image(Okular::PixmapRequest *request)
         }
 
         QImage img(width, height, QImage::Format_RGB32);
-        uint32_t *data = reinterpret_cast<uint32_t *>(img.bits());
+        uint32 *data = reinterpret_cast<uint32 *>(img.bits());
 
         // read data
         if (TIFFReadRGBAImageOriented(d->tiff, width, height, data, orientation) != 0) {
@@ -364,7 +364,7 @@ Okular::Document::PrintError TIFFGenerator::print(QPrinter &printer)
         }
 
         QImage printImage(width, height, QImage::Format_RGB32);
-        uint32_t *data = reinterpret_cast<uint32_t *>(printImage.bits());
+        uint32 *data = reinterpret_cast<uint32 *>(printImage.bits());
 
         // read data
         if (TIFFReadRGBAImageOriented(d->tiff, width, height, data, ORIENTATION_TOPLEFT) != 0) {
-- 
2.51.0


From feb9ff2edbcbec986fb0d19ef4c3a15644098734 Mon Sep 17 00:00:00 2001
From: Luc Schrijvers <begasus@gmail.com>
Date: Tue, 25 Mar 2025 09:18:34 +0100
Subject: Use system colors/icons


diff --git a/part/part.cpp b/part/part.cpp
index 38fce3c..4d684bb 100644
--- a/part/part.cpp
+++ b/part/part.cpp
@@ -845,9 +845,11 @@ void Part::setupActions()
 {
     KActionCollection *ac = actionCollection();
 
+#ifndef Q_OS_HAIKU
     auto manager = new KColorSchemeManager(this);
     KActionMenu *schemeMenu = KColorSchemeMenu::createMenu(manager, this);
     ac->addAction(QStringLiteral("colorscheme_menu"), schemeMenu->menu()->menuAction());
+#endif
 
     m_copy = KStandardAction::create(KStandardAction::Copy, m_pageView, SLOT(copyTextSelection()), ac);
 
-- 
2.51.0

