SUMMARY="A light-weight text-to-speech engine"
DESCRIPTION="Flite is a text-to-speech engine developed by the Carnegie \
Mellon University. As a light-weight alternative to the Festival engine, it \
is desinged to fit into small embedded machines as well as large-scale \
servers. In addition to its native format flite supports voices generated by \
the FestVox project as well."
HOMEPAGE="http://www.festvox.org/flite/"
COPYRIGHT="1986 University of Toronto
	1992, 1995 Markus Mummert
	1996-2004 University of Edinburgh, UK
	1999-2014 Language Technologies Institute, Carnegie Mellon University
	2001 Cepstral, LLC
	2001 Sun Microsystems, Inc.
	2003-2004 Nagoya Institute of Technology
	2003-2004 Nara Institute of Science and Technology
	2008-2012 University of Illinois at Urbana-Champaign"
# Although individually many files have different licenses, as a whole this
# license covers all the files.
LICENSE="Flite"
REVISION="3"
SOURCE_URI="http://www.festvox.org/flite/packed/flite-2.0/flite-${portVersion}-release.tar.bz2"
CHECKSUM_SHA256="678c3860fd539402b5d1699b921239072af6acb4e72dc4720494112807cae411"
SOURCE_DIR="flite-${portVersion}-release"
PATCHES="flite-$portVersion.patchset"

ARCHITECTURES="x86_gcc2 x86 x86_64"
SECONDARY_ARCHITECTURES="x86 x86_gcc2"

PROVIDES="
	flite$secondaryArchSuffix = $portVersion
	flite_tools = $portVersion
	cmd:flite$secondaryArchSuffix = $portVersion
	cmd:flite_time$secondaryArchSuffix = $portVersion
	cmd:flite_cmu_time_awb = $portVersion
	cmd:flite_cmu_us_awb = $portVersion
	cmd:flite_cmu_us_kal = $portVersion
	cmd:flite_cmu_us_kal16 = $portVersion
	cmd:flite_cmu_us_rms = $portVersion
	cmd:flite_cmu_us_slt = $portVersion
	lib:libflite$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_grapheme_lang$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_grapheme_lex$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_indic_lang$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_indic_lex$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_time_awb$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_us_awb$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_us_kal$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_us_kal16$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_us_rms$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmu_us_slt$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_cmulex$secondaryArchSuffix = $portVersion compat >= 2
	lib:libflite_usenglish$secondaryArchSuffix = $portVersion compat >= 2
	"
REQUIRES="
	haiku$secondaryArchSuffix
	"

PROVIDES_devel="
	flite${secondaryArchSuffix}_devel = $portVersion
	devel:libflite$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_grapheme_lang$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_grapheme_lex$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_indic_lang$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_indic_lex$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_time_awb$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_us_awb$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_us_kal$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_us_kal16$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_us_rms$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmu_us_slt$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_cmulex$secondaryArchSuffix = $portVersion compat >= 2
	devel:libflite_usenglish$secondaryArchSuffix = $portVersion compat >= 2
	"
REQUIRES_devel="
	haiku${secondaryArchSuffix}_devel
	flite$secondaryArchSuffix == $portVersion base
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"
BUILD_PREREQUIRES="
	makefile_engine
	cmd:awk
	cmd:autoconf
	cmd:gcc$secondaryArchSuffix
	cmd:make
	"

BUILD()
{
	autoconf
	runConfigure ./configure --enable-shared
	make # Parallel builds not working
}

INSTALL()
{
	make install
	prepareInstalledDevelLibs \
		libflite \
		libflite_cmu_grapheme_lang \
		libflite_cmu_grapheme_lex \
		libflite_cmu_indic_lang \
		libflite_cmu_indic_lex \
		libflite_cmu_time_awb \
		libflite_cmu_us_awb \
		libflite_cmu_us_kal \
		libflite_cmu_us_kal16 \
		libflite_cmu_us_rms \
		libflite_cmu_us_slt \
		libflite_cmulex \
		libflite_usenglish
	packageEntries devel $developDir
}
