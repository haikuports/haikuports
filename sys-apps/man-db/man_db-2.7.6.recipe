SUMMARY="A man replacement that utilizes berkdb instead of flat files"
DESCRIPTION="man-db is an implementation of the standard Unix documentation \
system accessed using the man command. It uses a Berkeley DB database in \
place of the traditional flat-text whatis databases. man-db is used by \
several popular GNU/Linux distributions"
HOMEPAGE="http://www.nongnu.org/man-db"
COPYRIGHT="1990, 1991 John W. Eaton.
	1994, 1995 Markus Armbruster.
	1994, 1995 Graeme W. Wilford. (Wilf.)
	1995 Carl Edman.
	1996, 1997, 1998, 2000 Fabrizio Polacco.
	2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
	2011, 2012, 2013, 2014 Colin Watson.
	1984, 1989, 1990, 1991, 1992, 1995, 1996, 1997, 1998, 1999,
	2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009,
	2010, 2011, 2012 Free Software Foundation, Inc."
LICENSE="GNU GPL v2"
REVISION="1"
SOURCE_URI="http://download.savannah.nongnu.org/releases/man-db/man-db-$portVersion.tar.xz"
CHECKSUM_SHA256="c68cffa6b93f6362beb1d1259f9ad5b65af2aee9a7d9910086082ea4b75f5da2"
SOURCE_DIR="man-db-$portVersion"

ARCHITECTURES="?x86_gcc2 ?x86 ?x86_64"
SECONDARY_ARCHITECTURES="?x86"

PROVIDES="
	man_db$secondaryArchSuffix = $portVersion
	cmd:mandb$secondaryArchSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libiconv$secondaryArchSuffix
	lib:libpipeline$secondaryArchSuffix
	lib:libgdbm$secondaryArchSuffix
	lib:libz$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libiconv$secondaryArchSuffix
	devel:libpipeline$secondaryArchSuffix
	devel:libgdbm$secondaryArchSuffix
	devel:libz$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:aclocal
	cmd:autoconf
	cmd:autopoint
	cmd:awk
	cmd:gcc$secondaryArchSuffix
	cmd:libtoolize$secondaryArchSuffix
	cmd:make
	cmd:pkg_config$secondaryArchSuffix
	"

BUILD()
{
	export CFLAGS="-D_BSD_SOURCE"
	export LDFLAGS="-lbsd"
	./autogen.sh
	runConfigure ./configure
	make $jobArgs
}

INSTALL()
{
	make install
}
