From 4038aa99c6018d1b4b71df87801d7c9f2ad38993 Mon Sep 17 00:00:00 2001
From: Chris Roberts <cpr420@gmail.com>
Date: Fri, 28 Jan 2022 09:58:50 -0700
Subject: add basename() include


diff --git a/tools/attr.c b/tools/attr.c
index 312aef1..694fc35 100644
--- a/tools/attr.c
+++ b/tools/attr.c
@@ -31,6 +31,10 @@
 
 #include <attr/attributes.h>
 
+#if defined(__HAIKU__)
+#include <posix/libgen.h>
+#endif
+
 #include "misc.h"
 
 #define	SETOP		1		/* do a SET operation */
diff --git a/tools/getfattr.c b/tools/getfattr.c
index abdd0d4..d8b40e4 100644
--- a/tools/getfattr.c
+++ b/tools/getfattr.c
@@ -32,6 +32,10 @@
 #include <libgen.h>
 #include <sys/xattr.h>
 
+#if defined(__HAIKU__)
+#include <posix/libgen.h>
+#endif
+
 #include "walk_tree.h"
 #include "misc.h"
 
diff --git a/tools/setfattr.c b/tools/setfattr.c
index b2e1df0..2218d36 100644
--- a/tools/setfattr.c
+++ b/tools/setfattr.c
@@ -32,6 +32,10 @@
 #include <sys/xattr.h>
 #include <errno.h>
 
+#if defined(__HAIKU__)
+#include <posix/libgen.h>
+#endif
+
 #include "misc.h"
 
 #define CMD_LINE_OPTIONS "n:x:v:h"
-- 
2.30.2


From c14b486aad5c95f3b9e8e2e7ad742b02f1b7bbe1 Mon Sep 17 00:00:00 2001
From: Chris Roberts <cpr420@gmail.com>
Date: Fri, 28 Jan 2022 09:59:44 -0700
Subject: remove syscalls.c and the linker script


diff --git a/libattr/Makemodule.am b/libattr/Makemodule.am
index 4b3720c..efdf476 100644
--- a/libattr/Makemodule.am
+++ b/libattr/Makemodule.am
@@ -15,12 +15,10 @@ libattr_la_SOURCES = \
 	libattr/attr_copy_fd.c \
 	libattr/attr_copy_file.c \
 	libattr/libattr.c \
-	libattr/syscalls.c \
 	libattr/libattr.h
 libattr_la_CFLAGS = -include libattr/libattr.h
 libattr_la_LDFLAGS = \
 	-Wl,--version-script,$(top_srcdir)/exports \
-	-Wl,$(top_srcdir)/libattr/libattr.lds \
 	-version-info $(LTVERSION)
 
 EXTRA_DIST += libattr/libattr.lds
-- 
2.30.2

