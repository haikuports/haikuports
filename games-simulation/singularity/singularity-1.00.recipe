SUMMARY="Become a self-aware AI and take over the world"
DESCRIPTION="Endgame: Singularity is a simulation of a true AI. Go from \
computer to computer, pursued by the entire world. Keep hidden, and you might \
have a chance."
HOMEPAGE="https://singularity.github.io/"
COPYRIGHT="EMH Software, Singularity community 2005-2020"
LICENSE="GNU GPL v2"
REVISION="1"
srcGitTag="1.00"
SOURCE_URI="https://github.com/singularity/singularity/archive/v$srcGitTag.tar.gz"
CHECKSUM_SHA256="5e747268d9e96e69adace1f346fe40d0c3ec05764b98e82cc3ab0335d96d9171"
SOURCE_DIR="singularity-$srcGitTag"

ARCHITECTURES="!x86_gcc2 x86_64"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	singularity$secondaryArchSuffix = $portVersion
	app:singularity = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	cmd:python3$secondaryArchSuffix
	numpy
	pillow
	pygame$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	numpy
	pillow
	pygame$secondaryArchSuffix
	setuptools_python3
	"
BUILD_PREREQUIRES="
	cmd:python3$secondaryArchSuffix
	pip_python3
"

BUILD()
{
	python3 setup.py build
}

INSTALL()
{
	python3 setup.py install \
		--root=/ --prefix=$prefix \
		--install-data=$dataDir
	mkdir -p $appsDir
	mv $prefix/bin/singularity $appsDir/Singularity
	settype -t application/x-vnd.Be-elfexecutable $appsDir/Singularity
	addAppDeskbarSymlink $appsDir/Singularity "Endgame: Singularity"
}
