SUMMARY="Spellchecker, forked from myspell"
DESCRIPTION="Hunspell is a spell checker and morphological analyzer library \
and program designed for languages with rich morphology and complex word \
compounding or character encoding."
HOMEPAGE="https://hunspell.github.io/"
COPYRIGHT="2007-2016 Hunspell developers et al.
	2002-2008 László Németh (Hunspell)
	2001-2002 Kevin Hendricks (MySpell)"
LICENSE="GNU GPL v2
	GNU LGPL v2.1
	MPL v1.1"
REVISION="1"
SOURCE_URI="https://github.com/hunspell/hunspell/archive/v$portVersion.tar.gz"
SOURCE_FILENAME="hunspell-$portVersion.tar.gz"
CHECKSUM_SHA256="3cd9ceb062fe5814f668e4f22b2fa6e3ba0b339b921739541ce180cac4d6f4c4"
PATCHES="
	hunspell-$portVersion.patchset
	hunspell-$portVersion-renameexes.patch
	"
ARCHITECTURES="!x86_gcc2 x86 x86_64"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	$portName = $portVersion
	lib:libhunspell_${portVersion%.*}$secondaryArchSuffix = 0.0.1 compat >= 0
	cmd:affixcompress$secondaryArchSuffix = $portVersion
	cmd:hunspell$secondaryArchSuffix = $portVersion
	cmd:hunspell_analyze$secondaryArchSuffix = $portVersion
	cmd:hunspell_chmorph$secondaryArchSuffix = $portVersion
	cmd:hunspell_munch$secondaryArchSuffix = $portVersion
	cmd:hunspell_unmunch$secondaryArchSuffix = $portVersion
	cmd:hunzip$secondaryArchSuffix = $portVersion
	cmd:hzip$secondaryArchSuffix = $portVersion
	cmd:ispellaff2myspell$secondaryArchSuffix = $portVersion
	cmd:makealias$secondaryArchSuffix = $portVersion
	cmd:wordforms$secondaryArchSuffix = $portVersion
	cmd:wordlist2hunspell$secondaryArchSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libiconv$secondaryArchSuffix
	lib:libintl$secondaryArchSuffix
	lib:libz$secondaryArchSuffix
	"

PROVIDES_devel="
	hunspell${secondaryArchSuffix}_devel = $portVersion
	devel:libhunspell_${portVersion%.*}$secondaryArchSuffix = 0.0.1 compat >= 0
	"
REQUIRES_devel="
	hunspell$secondaryArchSuffix == $portVersion base
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libiconv$secondaryArchSuffix
	devel:libintl$secondaryArchSuffix
	devel:libz$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:autoconf
	cmd:gcc$secondaryArchSuffix
	cmd:ld$secondaryArchSuffix
	cmd:libtoolize$secondaryArchSuffix
	cmd:make
	"

BUILD()
{
	autoreconf -fi
	runConfigure ./configure
	make $jobArgs
}

INSTALL()
{
	make install

	rm $libDir/*.la

	# remove any existing (but empty) data/locale/*/LC_MESSAGES directory
	rm -r $dataDir/locale

	prepareInstalledDevelLibs libhunspell-${portVersion%.*}
	fixPkgconfig

	packageEntries devel \
		$developDir
}

TEST()
{
	make check
}
