SUMMARY="Utilities for manipulating PostScript documents"
DESCRIPTION="PSUtils is a suite of utilities for manipulating PDF and PostScript documents. You \
can select and rearrange pages, including arrangement into signatures for booklet printing, \
combine multple pages into a single page for n-up printing, and resize, flip and rotate pages.

PostScript files should conform to the PostScript Document Structuring Conventions (DSC); \
however, PSUtils intentionally does not check this, as some programs produce non-conforming \
output that can be successfully processed anyway. If PSUtils does not work for you, check whether \
your software needs to be configured to produce DSC-conformant PostScript."
HOMEPAGE="https://github.com/rrthomas/psutils"
COPYRIGHT="2023-2025 Reuben Thomas"
LICENSE="GNU GPL v3"
REVISION="1"
SOURCE_URI="https://files.pythonhosted.org/packages/py3/${portName:0:1}/$portName/$portName-$portVersion-py3-none-any.whl#noarchive"
CHECKSUM_SHA256="218c7045ce93c9e5306cc176fbe99213d3d0ca07e3dc1f5ba60c80d3790da746"
DISABLE_SOURCE_PACKAGE="yes"

pythonVersion=3.10
pythonPackage=python${pythonVersion//.}

ARCHITECTURES="any"

PROVIDES="
	psutils = $portVersion
	cmd:epsffit
	cmd:extractres
	cmd:includeres
	cmd:psbook
	cmd:psjoin
	cmd:psnup
	cmd:psresize
	cmd:psselect
	cmd:pstops
	"
REQUIRES="
	haiku
	cmd:paper
	cmd:python$pythonVersion
	puremagic_$pythonPackage
	pypdf_$pythonPackage
	"

BUILD_REQUIRES="
	haiku_devel
	installer_$pythonPackage
	"
BUILD_PREREQUIRES="
	cmd:python$pythonVersion
	"

INSTALL()
{
	python=python$pythonVersion
	$python -m installer -p $prefix $portName-$portVersion-py3-none-any.whl

	# relocate man pages to the correct place:
	mkdir -p $manDir
	mv $prefix/share/man/* $manDir
	rm -rf $prefix/share
}
