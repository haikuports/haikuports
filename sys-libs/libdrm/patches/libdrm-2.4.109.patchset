From e2ab214b7ce934aac490119e1654e6d61081184c Mon Sep 17 00:00:00 2001
From: Ken Mays <kmays2000@gmail.com>
Date: Fri, 26 Nov 2021 08:21:14 +1000
Subject: Fix MAKEDEV for Haiku


diff --git a/xf86drm.c b/xf86drm.c
index 5933e4b..9f25d3a 100644
--- a/xf86drm.c
+++ b/xf86drm.c
@@ -68,6 +68,13 @@
 #include <sys/pciio.h>
 #endif
 
+#if !defined(HAVE_MAJOR) && !defined(major)
+/* Replacement for major/minor/makedev. */
+#define	major(x) ((int)(0x00ff & ((x) >> 8)))
+#define	minor(x) ((int)(0xffff00ff & (x)))
+#define	makedev(maj,min) ((0xff00 & ((maj)<<8)) | (0xffff00ff & (min)))
+#endif
+
 #define ARRAY_SIZE(a) (sizeof(a) / sizeof((a)[0]))
 
 /* Not all systems have MAP_FAILED defined */
-- 
2.30.2
