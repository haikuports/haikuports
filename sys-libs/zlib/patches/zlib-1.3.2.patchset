From 127ef0a1eef25a54b251f56e89502a4ed6422b04 Mon Sep 17 00:00:00 2001
From: Adrien Destugues <pulkomandy@pulkomandy.tk>
Date: Sun, 28 Aug 2016 18:33:07 +0200
Subject: zlib: export Haiku shared object symbols


diff --git a/zlib.map b/zlib.map
index 7a9100f..4182423 100644
--- a/zlib.map
+++ b/zlib.map
@@ -6,6 +6,7 @@ ZLIB_1.2.0 {
     inflateBackEnd;
     inflateBackInit_;
     inflateCopy;
+    _gSharedObjectHaiku*;
   local:
     deflate_copyright;
     inflate_copyright;
-- 
2.52.0


From ef48b2ca09ec634dee7ae4fb05374695dcf80dc4 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Joachim=20Mairb=C3=B6ck?= <j.mairboeck@gmail.com>
Date: Sat, 21 Feb 2026 16:18:01 +0100
Subject: use vsnprintf also in C89 mode (i.e. with gcc2)


diff --git a/gzguts.h b/gzguts.h
index 266305d..023dab6 100644
--- a/gzguts.h
+++ b/gzguts.h
@@ -92,8 +92,8 @@
 #        define vsnprintf _vsnprintf
 #      endif
 #    endif
-#  elif !defined(__STDC_VERSION__) || __STDC_VERSION__-0 < 199901L
-/* Otherwise if C89/90, assume no C99 snprintf() or vsnprintf() */
+#  elif !defined(__HAIKU__) && (!defined(__STDC_VERSION__) || __STDC_VERSION__-0 < 199901L)
+/* Otherwise if C89/90, assume no C99 snprintf() or vsnprintf(), except Haiku, which always has them */
 #    ifndef NO_snprintf
 #      define NO_snprintf
 #    endif
-- 
2.52.0

