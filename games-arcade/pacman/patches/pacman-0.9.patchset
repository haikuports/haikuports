From 00b0ac66a6872b49da000325ccde9e5b5d8219cd Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ondrej=20=C4=8Cerman?= <ocerman@sda1.eu>
Date: Sat, 14 Mar 2020 21:54:24 +0100
Subject: Fixed data dir path


diff --git a/src/platform.cpp b/src/platform.cpp
index fccd15e..96f308a 100644
--- a/src/platform.cpp
+++ b/src/platform.cpp
@@ -6,12 +6,24 @@
 #define WINDOWS 0
 #endif
 
+#ifdef __HAIKU__
+#include <FindDirectory.h>
+#include <fs_info.h>
+#endif
+
+
 void getFilePath(char filePath[], const char file[]) {
      char installDir[256];
+     #ifdef __HAIKU__
+          dev_t volume = dev_for_path("/boot");
+          find_directory(B_SYSTEM_DATA_DIRECTORY, volume, false, installDir, sizeof(installDir));
+          strcat(installDir, "/pacman/");
+     #else
      if(WINDOWS)
          strcpy(installDir, "");
      else
          strcpy(installDir, "/usr/local/share/pacman/");
+     #endif
      strcpy(filePath, installDir);
      strcat(filePath, file);
 }
-- 
2.24.1


From db8e1c496c399e9ce4edbc3869fffbe11d9a1dda Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ondrej=20=C4=8Cerman?= <ocerman@sda1.eu>
Date: Sun, 15 Mar 2020 16:42:41 +0100
Subject: Fixed path for highscore file


diff --git a/src/platform.cpp b/src/platform.cpp
index 96f308a..92b8ab9 100644
--- a/src/platform.cpp
+++ b/src/platform.cpp
@@ -32,6 +32,11 @@ static char gameDirBase[256];
 
 void getGameDirPath(char filePath[], const char fileName[]) {
 	if (!gameDirBase[0]) {
+		#ifdef __HAIKU__
+			dev_t volume = dev_for_path("/boot");
+			find_directory(B_USER_SETTINGS_DIRECTORY, volume, false, gameDirBase, sizeof(gameDirBase));
+			strcat(gameDirBase, "/pacman_sdl/");
+		#else
 		if (WINDOWS) {
 			char *env = getenv("APPDATA");
 			if (env) {
@@ -60,6 +65,7 @@ void getGameDirPath(char filePath[], const char fileName[]) {
 				strcat(gameDirBase, "/");
 			strcat(gameDirBase, ".pacman_sdl/");
 		}
+		#endif
 	}
 	strcpy(filePath, gameDirBase);
 	if (fileName)
-- 
2.24.1

