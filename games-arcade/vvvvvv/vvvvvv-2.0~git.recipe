SUMMARY="A puzzle-platformer wherein you change gravity itself instead of jumping."
DESCRIPTION="Notice requested by the author: \
VVVVVV is a commercial game! The author has given special permission \
to make this Haiku version available for free. If you enjoy the game, \
please consider purchasing a copy at thelettervsixtim.es. \
\
VVVVVV is a hit 2010 indie video game from Super Hexagon creator Terry Cavanagh. \
Play as Captain Viridian, whose must rescue their crew after a teleporter mishap \
caused them to be seperated in Dimension VVVVVV."
HOMEPAGE="https://thelettervsixtim.es"
COPYRIGHT="Terry Cavanagh © 2010-2020"
LICENSE="VVVVVV Source Code License v1.0"
REVISION="1"
SOURCE_URI="https://github.com/TerryCavanagh/vvvvvv.git"
ARCHITECTURES="x86_64"
if [ "$targetArchitecture" = x86_gcc2 ]; then
SECONDARY_ARCHITECTURES="x86"
fi
ADDITIONAL_FILES="data.zip"

PROVIDES="
	vvvvvv$secondaryArchSuffix = $portVersion
	app:vvvvvv$secondaryArchSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libsdl2$secondaryArchSuffix
	lib:sdl2_mixer$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku_devel$secondaryArchSuffix
	devel:libsdl2$secondaryArchSuffix
	devel:sdl2_mixer$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	makefile_engine
	cmd:make
	cmd:gcc$secondaryArchSuffix
	cmd:cmake
	cmd:git$secondaryArchSuffix
	cmd:wget$secondaryArchSuffix
	"

BUILD()
{
	cd $portDir/vvvvvv/desktop_version/
	mkdir flibitbuild
	cd $portDir/vvvvvv/desktop_version/flibitBuild/
	cmake ..
	make $jobArgs
}

INSTALL()
{
	mkdir -p $appsDir/vvvvvv
	cp $portDir/vvvvvv/desktop_version/flibitBuild/*-static.a $appsDir/vvvvvv
	cp $portDir/vvvvvv/desktop_version/flibitBuild/VVVVVV $appsDir/vvvvvv
	cp $portDir/additional_files/data.zip $appsDir/vvvvvv
	addAppDeskbarSymlink $appsDir/vvvvvv/VVVVVV "VVVVVV"
}