SUMMARY="A C++ library for using SGML/XML files"
DESCRIPTION="An SGML Extended Facilities system conforming to Annex A of International Standard ISO/IEC 10744 -- Hypermedia/Time-based Structuring Language"
HOMEPAGE="https://openjade.sourceforge.net/"
COPYRIGHT="1994, 1995, 1996, 1997, 1998 James Clark"
LICENSE="GNU GPL v2"
REVISION="1"
SOURCE_URI="https://downloads.sourceforge.net/openjade/OpenSP-$portVersion.tar.gz"
CHECKSUM_SHA256="57f4898498a368918b0d49c826aa434bb5b703d2c3b169beb348016ab25617ce"
SOURCE_DIR="OpenSP-$portVersion"
PATCHES="opensp-1.5.2.patchset"

ARCHITECTURES="all"

libVersion="5.0.0"
libVersionCompat="$libVersion compat >= ${libVersion%%.*}"

PROVIDES="
	opensp = $portVersion
	cmd:onsgmls = $portVersion
	cmd:osgmlnorm = $portVersion
	cmd:ospam = $portVersion
	cmd:ospcat = $portVersion
	cmd:ospent = $portVersion
	cmd:osx = $portVersion
	lib:libosp = $libVersionCompat
	"

REQUIRES="
	haiku
	"

PROVIDES_devel="
	opensp_devel = $portVersion
	devel:libosp = $libVersionCompat
	"

REQUIRES_devel="
	haiku_devel
	"

BUILD_REQUIRES="
	haiku_devel
	"

BUILD_PREREQUIRES="
	cmd:automake
	cmd:autoreconf
	cmd:gcc
	cmd:gettext
	cmd:libtoolize
	cmd:make
	cmd:perl
	"

BUILD()
{
	autoreconf -if
	runConfigure ./configure --disable-doc-build
	make $jobArgs
}

INSTALL()
{
	make PREFIX=$prefix install
	mkdir -p $developLibDir
	rm $libDir/lib*.la
	mv $libDir/lib*.a $developLibDir

	prepareInstalledDevelLibs libosp
	fixPkgconfig

	# devel package
	packageEntries devel \
		$developDir
}
