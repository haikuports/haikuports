From 465b9e95246e2cac5f80a681e54a16584df1643a Mon Sep 17 00:00:00 2001
From: begasus <begasus@gmail.com>
Date: Sat, 12 Aug 2017 20:13:53 +0200
Subject: use readelf instead of ldd


diff --git a/giscanner/shlibs.py b/giscanner/shlibs.py
index c93d20c..f0c6753 100644
--- a/giscanner/shlibs.py
+++ b/giscanner/shlibs.py
@@ -108,7 +108,7 @@ def _resolve_non_libtool(options, binary, libraries):
         if platform_system == 'Darwin':
             args.extend(['otool', '-L', binary.args[0]])
         else:
-            args.extend(['ldd', binary.args[0]])
+            args.extend(['readelf', '-d', binary.args[0]])
         proc = subprocess.Popen(args, stdout=subprocess.PIPE)
         patterns = {}
         for library in libraries:
@@ -121,7 +121,7 @@ def _resolve_non_libtool(options, binary, libraries):
                 m = pattern.search(line)
                 if m:
                     del patterns[library]
-                    shlibs.append(m.group(1))
+                    shlibs.append(m.group(1)[0:-1])
                     break
 
         if len(patterns) > 0:
-- 
2.16.1


From 3049b6e08986284e934f59404b45961a4a701dd7 Mon Sep 17 00:00:00 2001
From: begasus <begasus@gmail.com>
Date: Sat, 17 Feb 2018 22:30:26 +0100
Subject: use glib2 >= 2.53.0


diff --git a/configure.ac b/configure.ac
index 541a102..2210f08 100644
--- a/configure.ac
+++ b/configure.ac
@@ -128,7 +128,7 @@ GIR_DIR="$EXPANDED_DATADIR/$GIR_SUFFIX"
 AC_SUBST(GIR_DIR)
 AC_DEFINE_UNQUOTED(GIR_DIR, "$GIR_DIR", [Director prefix for gir installation])
 
-PKG_CHECK_MODULES(GLIB, [glib-2.0 >= 2.55.0])
+PKG_CHECK_MODULES(GLIB, [glib-2.0 >= 2.53.0])
 
 PKG_CHECK_MODULES(GOBJECT, [gobject-2.0])
 PKG_CHECK_MODULES(GMODULE, [gmodule-2.0])
-- 
2.16.1

