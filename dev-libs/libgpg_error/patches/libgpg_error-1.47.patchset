From e2a52be8c54431fbbb54e3174243dcbcbe8b0e47 Mon Sep 17 00:00:00 2001
From: Jerome Duval <jerome.duval@gmail.com>
Date: Tue, 5 Aug 2014 16:25:46 +0000
Subject: haiku patch


diff --git a/src/mkerrcodes2.awk b/src/mkerrcodes2.awk
index 188f7a4..d270f38 100644
--- a/src/mkerrcodes2.awk
+++ b/src/mkerrcodes2.awk
@@ -81,7 +81,7 @@ BEGIN {
 /^#/ { next; }
 
 header {
-  if ($1 ~ /^[0123456789]+$/)
+  if ($1 ~ /^-?[0123456789]+$/)
     {
       print "static const int err_code_from_index[] = {";
       header = 0;
-- 
2.37.3


From 2eda997d28adacf63357d6422955997e3d03f02f Mon Sep 17 00:00:00 2001
From: fbrosson <fbrosson@localhost>
Date: Wed, 17 Jan 2018 22:03:45 +0000
Subject: Do not use __GNUC_PATCHLEVEL__ if it's not defined.


diff --git a/doc/yat2m.c b/doc/yat2m.c
index c2806e3..0736eb8 100644
--- a/doc/yat2m.c
+++ b/doc/yat2m.c
@@ -105,9 +105,14 @@
 
 
 #if __GNUC__
+# ifdef __GNUC_PATCHLEVEL__
 # define MY_GCC_VERSION (__GNUC__ * 10000 \
                          + __GNUC_MINOR__ * 100         \
                          + __GNUC_PATCHLEVEL__)
+# else
+# define MY_GCC_VERSION (__GNUC__ * 10000 \
+                         + __GNUC_MINOR__ * 100)
+# endif
 #else
 # define MY_GCC_VERSION 0
 #endif
diff --git a/src/gpg-error.h.in b/src/gpg-error.h.in
index bce028e..3648875 100644
--- a/src/gpg-error.h.in
+++ b/src/gpg-error.h.in
@@ -153,9 +153,14 @@ typedef unsigned int gpg_error_t;
  * GCC feature test.
  */
 #if __GNUC__
+# ifdef __GNUC_PATCHLEVEL__
 # define _GPG_ERR_GCC_VERSION (__GNUC__ * 10000 \
                                + __GNUC_MINOR__ * 100 \
                                + __GNUC_PATCHLEVEL__)
+# else
+# define MY_GCC_VERSION (__GNUC__ * 10000 \
+                         + __GNUC_MINOR__ * 100)
+# endif
 #else
 # define _GPG_ERR_GCC_VERSION 0
 #endif
-- 
2.37.3


From 69cdc6d57a69c3aea83cc172fbd7aae59af7f9f8 Mon Sep 17 00:00:00 2001
From: Jerome Duval <jerome.duval@gmail.com>
Date: Thu, 21 Mar 2019 23:22:43 +0100
Subject: gpg-error.c: remove preprocessing in macro for gcc2.


diff --git a/src/gpg-error.c b/src/gpg-error.c
index 4e8bd8b..c70c45d 100644
--- a/src/gpg-error.c
+++ b/src/gpg-error.c
@@ -557,13 +557,8 @@ main (int argc, char *argv[])
                 "Print all error codes"),
     ARGPARSE_c (CMD_DEFINES, "defines",
                 "Print all error codes as #define lines"),
-#if HAVE_W32_SYSTEM
-    ARGPARSE_c (CMD_LOCALE, "locale",
-                "Return the locale used for gettext"),
-#else
     ARGPARSE_c (CMD_LOCALE, "locale",
                 "@"),
-#endif
     ARGPARSE_s_n (OPT_DESC, "desc",
                   "Print with error description"),
     ARGPARSE_end()
-- 
2.37.3

