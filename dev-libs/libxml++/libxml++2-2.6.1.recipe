SUMMARY="C++ wrapper for libxml"
DESCRIPTION="libxml++ (a.k.a. libxmlplusplus) provides a C++ interface to XML files. \
It uses libxml2 to access the XML files.

libxml++-2.6, libxml++-3.0, libxml++-4.0 and libxml++-5.0 are different \
parallel-installable ABIs. This package contains libxml++-2.6."
HOMEPAGE="https://libxmlplusplus.sourceforge.net/"
COPYRIGHT="2004 LibXML++"
LICENSE="GNU LGPL v2"
REVISION="1"
SOURCE_URI="https://download.gnome.org/sources/libxml++/2.6/libxml++-$portVersion.tar.bz2"
CHECKSUM_SHA256="461b924966f1ca54623b90b47d84061331e546960d47b410c87410ba9b025782"
SOURCE_FILENAME="libxml++-$portVersion.tar.bz2"
SOURCE_DIR="libxml++-$portVersion"
PATCHES="libxml++-$portVersion.patchset"

ARCHITECTURES="all ?x86_gcc2 ?x86"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	libxml++2$secondaryArchSuffix = $portVersion
	lib:libxml++_2.6$secondaryArchSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libxml2$secondaryArchSuffix
	lib:libglib_2.0$secondaryArchSuffix
	lib:libglibmm$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libglib_2.0$secondaryArchSuffix
	devel:libglibmm$secondaryArchSuffix
	devel:libxml2$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:gcc$secondaryArchSuffix
	cmd:make
	cmd:pkg_config$secondaryArchSuffix
	"

PROVIDES_devel="
	libxml++2${secondaryArchSuffix}_devel = $portVersion
	devel:libxml++_2.6$secondaryArchSuffix = $portVersion
	"
REQUIRES_devel="
	libxml++2$secondaryArchSuffix == $portVersion base
	devel:libglib_2.0$secondaryArchSuffix
	devel:libglibmm$secondaryArchSuffix
	devel:libxml2$secondaryArchSuffix
	"

BUILD()
{
	configure \
		--build=$targetArchitecture-pc-beos \
		--prefix=$prefix \
		--libdir=$libDir \
		--datadir=$dataDir \
		--includedir=$includeDir

	make $jobArgs
}

INSTALL()
{
	make install

	# Recipe breaks around here
	prepareInstalledDevelLibs libxml++-2.6
	fixPkgconfig

	# devel package
	packageEntries devel \
		$developDir
}
