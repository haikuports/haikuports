From 954e7f0f7be2363ca0e06ff22365eaf04a3b3b6a Mon Sep 17 00:00:00 2001
From: Peppersawce <michaelpeppers89@yahoo.it>
Date: Mon, 30 Sep 2024 16:06:57 +0200
Subject: Set correct settings folder


diff --git a/libpurple/account.c b/libpurple/account.c
index 9f6cc08..ee94d7b 100644
--- a/libpurple/account.c
+++ b/libpurple/account.c
@@ -969,7 +969,7 @@ parse_account(xmlnode *node)
 		{
 			/* Try to see if the icon got left behind in the old cache. */
 			g_free(filename);
-			filename = g_build_filename(g_get_home_dir(), ".gaim", "icons", data, NULL);
+			filename = g_build_filename(purple_home_dir(), "gaim", "icons", data, NULL);
 			if (g_file_get_contents(filename, &contents, &len, NULL)) {
 				purple_buddy_icons_set_account_icon(ret, (guchar*)contents, len);
 			}
diff --git a/libpurple/util.c b/libpurple/util.c
index fa650c2..2d29d2a 100644
--- a/libpurple/util.c
+++ b/libpurple/util.c
@@ -2568,7 +2568,7 @@ const char *
 purple_home_dir(void)
 {
 #ifndef _WIN32
-	return g_get_home_dir();
+	return "/boot/home/config/settings/libpurple/";
 #else
 	return wpurple_data_dir();
 #endif
@@ -2581,7 +2581,7 @@ purple_user_dir(void)
 	if (custom_user_dir != NULL)
 		return custom_user_dir;
 	else if (!user_dir)
-		user_dir = g_build_filename(purple_home_dir(), ".purple", NULL);
+		user_dir = g_build_filename(purple_home_dir(), "user", NULL);
 
 	return user_dir;
 }
-- 
2.52.0


From 2871854c76327bb2926ce3a1afbeb7a72a8e10ae Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Joachim=20Mairb=C3=B6ck?= <j.mairboeck@gmail.com>
Date: Sat, 27 Dec 2025 09:48:55 +0100
Subject: use make pure_install to install the perl module

This avoids installing perllocal.pod, which is useless and wrong in a packaged
installation.

diff --git a/libpurple/plugins/perl/Makefile.am b/libpurple/plugins/perl/Makefile.am
index 142f73b..b7e938d 100644
--- a/libpurple/plugins/perl/Makefile.am
+++ b/libpurple/plugins/perl/Makefile.am
@@ -118,7 +118,7 @@ all-local: common/Makefile
 install-exec-local:
 	@for dir in $(perl_dirs); do \
 		cd $$dir; \
-		$(MAKE) install; \
+		$(MAKE) pure_install; \
 		cd ..; \
 	done
 
-- 
2.52.0

