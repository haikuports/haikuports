SUMMARY="Atari Running on Any Machine"
DESCRIPTION="ARAnyM (Atari Running on Any Machine) is a multiplatform virtual \
machine for running Atari ST/TT/Falcon operating systems and applications."
HOMEPAGE="http://github.com/aranym/aranym"
COPYRIGHT="2001-2018 ARAnyM developer team"
LICENSE="GNU GPL v2"
REVISION="1"
SOURCE_URI="https://github.com/aranym/aranym/archive/ARANYM_${portVersion//./_}.tar.gz"
CHECKSUM_SHA256="c0935aee14cca55c08e75a94b77dcd69f326ae563ae371b22c7b9d8efd82e24e"
SOURCE_DIR="aranym-ARANYM_${portVersion//./_}"
PATCHES="aranym-$portVersion.patch"

ARCHITECTURES="x86_gcc2 x86 x86_64"

PROVIDES="
	aranym = $portVersion
	app:aranym = $portVersion
	cmd:aranym = $portVersion
	"
REQUIRES="
	haiku
	lib:libsdl
	lib:libSDL_image_1.2
	lib:libjpeg
	"

BUILD_REQUIRES="
	haiku_devel
	devel:libsdl_1.2
	devel:libSDL_image_1.2
	devel:libjpeg
	"
BUILD_PREREQUIRES="
	cmd:aclocal
	cmd:autoconf
	cmd:autoheader
	cmd:make
	cmd:gcc
	cmd:sdl_config
	"

BUILD()
{
	rm -f config.guess config.sub
	aclocal -I m4
	autoconf
	autoheader
	automake --add-missing --copy || true
	runConfigure --omit-dirs binDir ./configure --bindir="$appsDir" \
		--disable-sdl2
	make $jobArgs
}

INSTALL()
{
	make install
	mimeset "$appsDir"/aranym
	addAppDeskbarSymlink "$appsDir"/aranym ARAnyM
}
