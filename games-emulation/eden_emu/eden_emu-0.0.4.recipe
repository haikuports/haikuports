SUMMARY="Emulator of Nintendo Switch System"
DESCRIPTION="Eden emulator is a portable NX emulator"
HOMEPAGE="https://eden-emu.dev"
COPYRIGHT="2025 Eden Contributors"
LICENSE="GNU GPL v3"
REVISION="1"
SOURCE_URI="https://git.eden-emu.dev/eden-emu/eden/archive/master.tar.gz"
CHECKSUM_SHA256="657d9dbd9d745ff1c0b101baf5dae0444921a1c7391c2a11619886530ff51fed"
SOURCE_DIR="eden"
# No patches, upstream promised to keep-up
PATCHES=""

ARCHITECTURES="x86_64"
PROVIDES="
        eden_emu = $portVersion
        app:eden = $portVersion
        "
REQUIRES="
        haiku
        boost1.89
        lib:libavcodec
        lib:libavformat
        lib:libavutil
        lib:libswresample
        lib:libswscale
        lib:libQt6Core
        lib:libQt6DBus
        lib:libQt6Widgets
        lib:libQt6Core5Compat
        lib:libenet
        lib:libfmt
        lib:libGL
        lib:liblz4
        lib:libsdl2_2.0
        lib:libusb_1.0
        lib:libzstd
        lib:libssl
        lib:nlohmann_json
        lib:liblz4
        lib:libopus
        lib:libvulkan
        lib:libquazip1_qt6
        lib:zydis
        lib:libzstd
        "

BUILD_REQUIRES="
        haiku_devel
        ffmpeg7_devel
        boost1.89_devel
        devel:libQt6Core
        devel:libQt6DBus
        devel:libQt6Widgets
        devel:libQt6Core5Compat
        devel:libenet$secondaryArchSuffix
        devel:libfmt$secondaryArchSuffix >= 11
        devel:libGL
        devel:libsdl2_2.0
        devel:libusb_1.0
        devel:libssl
        devel:nlohmann_json
        devel:liblz4
        devel:libopus
        devel:libvulkan
        devel:libquazip1_qt6
        devel:libzycore
        devel:libzydis
        devel:libzstd
        "

BUILD_PREREQUIRES="
        cmd:cmake
        cmd:gcc
        cmd:ld
        cmd:ninja
        cmd:pkg_config
        cmd:patch
        "

BUILD()
{
        cmake -Bbuild -GNinja -S . \
                -DCMAKE_BUILD_TYPE=Release \
                -DCMAKE_INSTALL_PREFIX=$appsDir/eden/ \
                -DCMAKE_INSTALL_BINDIR=$appsDir/eden/
        cmake --build build -t yuzu $jobArgs
}

INSTALL()
{
        cmake --install build -t yuzu
}
