SUMMARY="Drag[en]gine Game Engine"
DESCRIPTION="Provides the game engine and launchers required to run games and other projects based on the Drag[en]gine Game Engine. Games do not compile directly against the game engine. Instead there is one shared installation on the system relying on a launcher to handle all the initialization and maintenance work.

This package provides two launchers.

'delauncher-console' is a console based launcher. It is the most basic launcher just able to run the game without providing any additional tools. It can be used to run games without overhead or in headless mode for server operation.

'delauncher-gui' is a graphical launcher. It supports additional features to manage the engine installation and games installed on the system. It is the the recommended launcher."
HOMEPAGE="https://dragondreams.ch"
COPYRIGHT="2020-2020 Dragon Dreams"
LICENSE="
	GNU GPL v3
	GNU LGPL v3
	"
REVISION="1"
releaseVersion="1.2"
SOURCE_URI="https://github.com/LordOfDragons/dragengine/archive/v$releaseVersion.tar.gz"
CHECKSUM_SHA256="e8dec0d3582ac9ccfa3e258f33b3018a120bbc70cef87557a6e4ffeb61febaef"
SOURCE_FILENAME="dragengine-$releaseVersion.tar.gz"
SOURCE_DIR="dragengine-$releaseVersion"

ARCHITECTURES="!x86_gcc2 ?x86 x86_64"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	dragengine$secondaryArchSuffix = $portVersion
	lib:libdragengine$secondaryArchSuffix = $portVersion
	cmd:delauncher_console$secondaryArchSuffix = $portVersion
	app:delauncher_gui$secondaryArchSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	mesa$secondaryArchSuffix
	jpeg$secondaryArchSuffix
	libpng16$secondaryArchSuffix
	openal$secondaryArchSuffix
	libogg$secondaryArchSuffix
	libvorbis$secondaryArchSuffix
	libtheora$secondaryArchSuffix
	zlib$secondaryArchSuffix
	lib:libGL$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libGL$secondaryArchSuffix
	devel:jpeg$secondaryArchSuffix
	devel:libpng16$secondaryArchSuffix
	devel:openal$secondaryArchSuffix
	devel:libogg$secondaryArchSuffix
	devel:libvorbis$secondaryArchSuffix
	devel:libtheora$secondaryArchSuffix
	devel:zlib$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:gcc$secondaryArchSuffix
	cmd:scons
	"

BUILD()
{
	cp -f $portDir/custom.py custom.py
	scons $jobArgs build
}

INSTALL()
{
	scons $jobArgs install_engine_runtime
	# scons $jobArgs dragengine_develop
	# scons $jobArgs install_igde_runtime
	# scons $jobArgs deigde_shared_develop
}
