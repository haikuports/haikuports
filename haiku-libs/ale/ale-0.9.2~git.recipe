SUMMARY="A GUI editor to create and edit constraint-based layouts"
DESCRIPTION="The Auckland Layout Editor (ALE) is a constraint-based layout \
editor that is based on the BALMLayout layout class. The constraint-based \
layout model is very powerful and can describe layouts that can't be described \
with other layout models, like for example, the grid-bag layout model. Layouts \
created with ALE are automatically resizable and non-overlapping. This means \
while editing a layout you can't create a layout that has two overlapping \
views. Furthermore, layouts created with ALE have no conflicting constraints.
ALE provides a small but powerful set of edit operations. These edit \
operations keep views automatically aligned to each other. This makes \
creating and editing layouts very easy.

For more information read:
https://www.cs.auckland.ac.nz/~lutteroth/publications/ZeidlerEtAl2013-AucklandLayoutEditor.pdf
or watch:
http://www.youtube.com/watch?v=ZPv58AWWGRQ"
HOMEPAGE="https://github.com/czeidler/ALEditor"
COPYRIGHT="2009-2014 UniAuckland Team"
LICENSE="MIT"
REVISION="1"
srcGitRev="51acfddce12e4a9c0b16cad610a9d0c8bd9c437e"
SOURCE_URI="https://github.com/czeidler/ALEditor/archive/$srcGitRev.tar.gz"
CHECKSUM_SHA256="6d4ff5852183cd807d63e52ac8d126c7f22ac815495a7ad923887a3f831aadd7"
SOURCE_FILENAME="ALEditor-$srcGitRev.tar.gz"
SOURCE_DIR="ALEditor-$srcGitRev"

ARCHITECTURES="all"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	ale$secondaryArchSuffix = $portVersion
	devel:libale$secondaryArchSuffix = $portVersion
	"
if [ -z "$secondaryArchSuffix" ]; then
	PROVIDES+="
		app:ALEditor = $portVersion
		"
fi
REQUIRES="
	haiku$secondaryArchSuffix
	ale${secondaryArchSuffix}_libs == $portVersion base
	"

SUMMARY_libs="Runtime libraries for the Auckland Layout Editor"
DESCRIPTION_libs="This package provides libale.so for use in other applications."
PROVIDES_libs="
	ale${secondaryArchSuffix}_libs = $portVersion
	lib:libale$secondaryArchSuffix = $portVersion
	"
REQUIRES_libs="
	haiku$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"
BUILD_PREREQUIRES="
	cmd:cmake
	cmd:gcc$secondaryArchSuffix
	cmd:ld$secondaryArchSuffix
	cmd:make
	"

BUILD()
{
	cmake -Bbuild -S. -DCMAKE_BUILD_TYPE=Release
	make -Cbuild $jobArgs
}

INSTALL()
{
	mkdir -pv $includeDir/ale
	cp -afv headers/editor/LayoutArchive.h $includeDir/ale/

	if [ -z "$secondaryArchSuffix" ]; then
		mkdir -pv $dataDir/ale/example
		cp -afv example/* $dataDir/ale/example/

		mkdir -pv $appsDir
		cp -afv build/ALEditor $appsDir/ALEditor
		addAppDeskbarSymlink $appsDir/ALEditor ALEditor
	fi

	mkdir -pv $libDir
	cp -afv build/libale.so $libDir/libale.so
	prepareInstalledDevelLib libale
	packageEntries libs $libDir
}
