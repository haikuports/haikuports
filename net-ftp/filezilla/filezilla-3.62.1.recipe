SUMMARY="The free FTP solution"
DESCRIPTION="FileZilla Client is a fast and reliable cross-platform \
FTP, FTPS and SFTP client with lots of useful features and an intuitive \
graphical user interface."
HOMEPAGE="https://filezilla-project.org/"

COPYRIGHT="2015-2022 Tim Kosse"
LICENSE="GNU GPL v2"
REVISION="1"
SOURCE_URI="https://download.filezilla-project.org/client/FileZilla_${portVersion}_src.tar.bz2"
CHECKSUM_SHA256="3c73c52384e366306cfd0edf75b7bb858856c7d74adecc2f0c7a28883835a4a2"
PATCHES="filezilla-$portVersion.patchset"

ARCHITECTURES="?all !x86_gcc2"

PROVIDES="
	filezilla = $portVersion
	app:FileZilla = $portVersion
	cmd:filezilla
	cmd:fzputtygen
	cmd:fzsftp
	lib:libfzclient_commonui_private
	lib:libfzclient_commonui_private_$portVersion
	lib:libfzclient_private
	lib:libfzclient_private_$portVersion
	"

REQUIRES="
	haiku
	wxgtk
	lib:libatk_1.0
	lib:libcairo
	lib:libfilezilla
	lib:libgdk_pixbuf_2.0
	lib:libglib_2.0
	lib:libgtk_3
	lib:libharfbuzz
	lib:libiconv
	lib:libidn
	lib:libintl
	lib:libnettle
	lib:libpango_1.0
	lib:libpugixml
	lib:libsqlite3
	"

BUILD_REQUIRES="
	haiku_devel
	wxgtk_Devel
	xdg_utils
	xz_utils_devel
	devel:libfilezilla
	devel:libgnutls
	devel:libiconv
	devel:libidn
	devel:libnettle
	devel:libpugixml
	devel:libsqlite3
	"
BUILD_PREREQUIRES="
	cmd:aclocal
	cmd:autoconf
	cmd:awk
	cmd:diff
	cmd:gcc
	cmd:make
	cmd:pkg_config
	cmd:wx_config
	cmd:xgettext
	"

defineDebugInfoPackage filezilla \
	"$libDir"/libfzclient-commonui-private.so \
	"$libDir"/libfzclient-private.so \
	"$binDir"/filezilla

BUILD()
{
	mkdir -p src/fzshellext/32
	mkdir -p src/fzshellext/64
	autoreconf
	mkdir -p build
	cd build
	runConfigure ../configure --disable-shellext --without-dbus

	make $jobArgs
}

INSTALL()
{
	make -C build install

	mkdir -p $developLibDir
	mv $libDir/*.la $developLibDir/
}
