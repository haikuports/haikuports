SUMMARY="A multi-platform toolkit for creating graphical user interfaces"
DESCRIPTION="GTK is a multi-platform toolkit for creating graphical user \
interfaces. Offering a complete set of widgets, GTK is suitable for projects \
ranging from small one-off projects to complete application suites."
HOMEPAGE="https://www.gtk.org"
COPYRIGHT="GNOME Desktop"
LICENSE="GNU LGPL v2"
REVISION="1"
srcGitRev="040d72f241d18270491a8798ab9ca7efce7d5bd5"
SOURCE_URI="https://github.com/X547/gtk/archive/$srcGitRev.tar.gz"
CHECKSUM_SHA256="db7fcc8046a7a88d0f23e0ce65faf57fae96e618cd62aa6da4ab60c161d37ed3"
SOURCE_DIR="gtk-$srcGitRev"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	gtk3$secondaryArchSuffix = $portVersion
	cmd:gtk_builder_tool$secondaryArchSuffix
	cmd:gtk_encode_symbolic_svg$secondaryArchSuffix
	cmd:gtk_launch$secondaryArchSuffix
	cmd:gtk_query_immodules_3.0$secondaryArchSuffix
	cmd:gtk_query_settings$secondaryArchSuffix
	cmd:gtk_update_icon_cache$secondaryArchSuffix
	cmd:gtk3_demo_application$secondaryArchSuffix
	cmd:gtk3_demo$secondaryArchSuffix
	cmd:gtk3_icon_browser$secondaryArchSuffix
	cmd:gtk3_widget_factory$secondaryArchSuffix
	lib:libgailutil_3$secondaryArchSuffix
	lib:libgdk_3$secondaryArchSuffix
	lib:libgtk_3$secondaryArchSuffix
	"
REQUIRES="
	haiku$secondaryArchSuffix
	atk$secondaryArchSuffix
	haiku_svg_icon_theme
	shared_mime_info$secondaryArchSuffix
	libepoxy${secondaryArchSuffix}
	pango$secondaryArchSuffix
	gdk_pixbuf$secondaryArchSuffix
	cairo$secondaryArchSuffix
	xkeyboard_config$secondaryArchSuffix
	lib:libfontconfig$secondaryArchSuffix
	lib:libfreetype$secondaryArchSuffix
	lib:libfribidi$secondaryArchSuffix
	lib:libglib_2.0$secondaryArchSuffix
	lib:libGL$secondaryArchSuffix
	lib:libharfbuzz$secondaryArchSuffix
	lib:libiconv$secondaryArchSuffix
	lib:libintl$secondaryArchSuffix
	lib:libwayland_client$secondaryArchSuffix
	lib:libwayland_cursor$secondaryArchSuffix
	lib:libwayland_egl$secondaryArchSuffix
	lib:libxkbcommon$secondaryArchSuffix
	lib:libz$secondaryArchSuffix
	"

PROVIDES_devel="
	gtk3${secondaryArchSuffix}_devel
	devel:libgailutil_3$secondaryArchSuffix
	devel:libgtk_3$secondaryArchSuffix
	devel:libgdk_3$secondaryArchSuffix
	"
REQUIRES_devel="
	gtk3$secondaryArchSuffix == $portVersion base
	atk${secondaryArchSuffix}_devel
	pango${secondaryArchSuffix}_devel
	gdk_pixbuf${secondaryArchSuffix}_devel
	cairo${secondaryArchSuffix}_devel
	xkeyboard_config$secondaryArchSuffix
	devel:libglib_2.0$secondaryArchSuffix
	devel:libGL$secondaryArchSuffix
	devel:libepoxy$secondaryArchSuffix
	devel:libwayland_client$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	atk${secondaryArchSuffix}_devel
	pango${secondaryArchSuffix}_devel
	gdk_pixbuf${secondaryArchSuffix}_devel
	cairo${secondaryArchSuffix}_devel
	wayland_protocols$secondaryArchSuffix
	xkeyboard_config$secondaryArchSuffix
	devel:libfontconfig$secondaryArchSuffix
	devel:libfreetype$secondaryArchSuffix
	devel:libfribidi$secondaryArchSuffix
	devel:libGL$secondaryArchSuffix
	devel:libharfbuzz$secondaryArchSuffix
	devel:libiconv$secondaryArchSuffix
	devel:libintl$secondaryArchSuffix
	devel:libglib_2.0$secondaryArchSuffix
	devel:libepoxy$secondaryArchSuffix
	devel:libwayland_client$secondaryArchSuffix
	devel:libwayland_cursor$secondaryArchSuffix
	devel:libwayland_egl$secondaryArchSuffix
	devel:libxkbcommon$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:cmake
	cmd:gcc$secondaryArchSuffix
	cmd:meson
	cmd:ninja
	cmd:pkg_config$secondaryArchSuffix
	cmd:xsltproc
	"

BUILD()
{
	meson build --buildtype=release \
SUMMARY="A multi-platform toolkit for creating graphical user interfaces"
DESCRIPTION="GTK is a multi-platform toolkit for creating graphical user \
interfaces. Offering a complete set of widgets, GTK is suitable for projects \
ranging from small one-off projects to complete application suites."
HOMEPAGE="https://www.gtk.org"
COPYRIGHT="GNOME Desktop"
LICENSE="GNU LGPL v2"
REVISION="1"
srcGitRev="040d72f241d18270491a8798ab9ca7efce7d5bd5"
SOURCE_URI="https://github.com/X547/gtk/archive/$srcGitRev.tar.gz"
CHECKSUM_SHA256="db7fcc8046a7a88d0f23e0ce65faf57fae96e618cd62aa6da4ab60c161d37ed3"
SOURCE_DIR="gtk-$srcGitRev"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	gtk3$secondaryArchSuffix = $portVersion
	cmd:gtk_builder_tool$secondaryArchSuffix
	cmd:gtk_encode_symbolic_svg$secondaryArchSuffix
	cmd:gtk_launch$secondaryArchSuffix
	cmd:gtk_query_immodules_3.0$secondaryArchSuffix
	cmd:gtk_query_settings$secondaryArchSuffix
	cmd:gtk_update_icon_cache$secondaryArchSuffix
	cmd:gtk3_demo_application$secondaryArchSuffix
	cmd:gtk3_demo$secondaryArchSuffix
	cmd:gtk3_icon_browser$secondaryArchSuffix
	cmd:gtk3_widget_factory$secondaryArchSuffix
	lib:libgailutil_3$secondaryArchSuffix
	lib:libgdk_3$secondaryArchSuffix
	lib:libgtk_3$secondaryArchSuffix
	"
REQUIRES="
	haiku$secondaryArchSuffix
	atk$secondaryArchSuffix
	haiku_svg_icon_theme
	shared_mime_info$secondaryArchSuffix
	libepoxy${secondaryArchSuffix}
	pango$secondaryArchSuffix
	gdk_pixbuf$secondaryArchSuffix
	cairo$secondaryArchSuffix
	xkeyboard_config$secondaryArchSuffix
	lib:libfontconfig$secondaryArchSuffix
	lib:libfreetype$secondaryArchSuffix
	lib:libfribidi$secondaryArchSuffix
	lib:libglib_2.0$secondaryArchSuffix
	lib:libGL$secondaryArchSuffix
	lib:libharfbuzz$secondaryArchSuffix
	lib:libiconv$secondaryArchSuffix
	lib:libintl$secondaryArchSuffix
	lib:libwayland_client$secondaryArchSuffix
	lib:libwayland_cursor$secondaryArchSuffix
	lib:libwayland_egl$secondaryArchSuffix
	lib:libxkbcommon$secondaryArchSuffix
	lib:libz$secondaryArchSuffix
	"

PROVIDES_devel="
	gtk3${secondaryArchSuffix}_devel
	devel:libgailutil_3$secondaryArchSuffix
	devel:libgtk_3$secondaryArchSuffix
	devel:libgdk_3$secondaryArchSuffix
	"
REQUIRES_devel="
	gtk3$secondaryArchSuffix == $portVersion base
	atk${secondaryArchSuffix}_devel
	pango${secondaryArchSuffix}_devel
	gdk_pixbuf${secondaryArchSuffix}_devel
	cairo${secondaryArchSuffix}_devel
	xkeyboard_config$secondaryArchSuffix
	devel:libglib_2.0$secondaryArchSuffix
	devel:libGL$secondaryArchSuffix
	devel:libepoxy$secondaryArchSuffix
	devel:libwayland_client$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	atk${secondaryArchSuffix}_devel
	pango${secondaryArchSuffix}_devel
	gdk_pixbuf${secondaryArchSuffix}_devel
	cairo${secondaryArchSuffix}_devel
	wayland_protocols$secondaryArchSuffix
	xkeyboard_config$secondaryArchSuffix
	devel:libGL$secondaryArchSuffix
	devel:libglib_2.0$secondaryArchSuffix
	devel:libepoxy$secondaryArchSuffix
	devel:libwayland_client$secondaryArchSuffix
	devel:libwayland_cursor$secondaryArchSuffix
	devel:libwayland_egl$secondaryArchSuffix
	devel:libxkbcommon$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:cmake
	cmd:gcc$secondaryArchSuffix
	cmd:meson
	cmd:ninja
	cmd:pkg_config$secondaryArchSuffix
	cmd:xsltproc
	"

BUILD()
{
	meson build --buildtype=release \
		--prefix=$prefix \
		--datadir=$dataDir \
		--includedir=$includeDir \
		--libdir=$libDir \
		--libexecdir=$libDir \
		--localedir=$dataDir/locale \
		--sysconfdir=$settingsDir/etc \
		-Dx11_backend=false \
		-Dintrospection=false

	ninja -C build
}

INSTALL()
{

	ninja -C build install

	fixPkgconfig
	prepareInstalledDevelLibs \
		libgailutil-3 \
		libgdk-3 \
		libgtk-3

	packageEntries devel \
		$developDir
}
		--prefix=$prefix \
		--datadir=$dataDir \
		--includedir=$includeDir \
		--libdir=$libDir \
		--libexecdir=$libDir \
		--localedir=$dataDir/locale \
		--sysconfdir=$settingsDir/etc \
		-Dx11_backend=false \
		-Dintrospection=false

	ninja -C build
}

INSTALL()
{
	ninja -C build install

	fixPkgconfig
	prepareInstalledDevelLibs \
		libgailutil-3 \
		libgdk-3 \
		libgtk-3

	packageEntries devel \
		$developDir
}
