SUMMARY="Real-time transport protocol library"
DESCRIPTION="GNU ccRTP is an implementation of RTP, the real-time \
transport protocol from the IETF (see RFC  3550, RFC 3551 and RFC 3555)."
HOMEPAGE="https://www.gnu.org/software/ccrtp/"
COPYRIGHT="1999-2000 Open Source Telecom Corporation
2001-2005 Open Source Telecom Corporation, Federico Montesino Pouzols
2006-2014 David Sugar, Tycho Softworks, Federico Montesino Pouzols, Werner Dittmann
2015 Cherokees of Idaho, Federico Montesino Pouzols, Werner Dittmann"
LICENSE="GNU GPL v2"
REVISION="1"
SOURCE_URI="https://ftp.gnu.org/gnu/ccrtp/ccrtp-$portVersion.tar.gz"
CHECKSUM_SHA256="f035ca0e1b5d37b78e358f07a25b05c5cdaf2c85c4b31cf29f6be17f288a349e"
SOURCE_DIR="ccrtp-$portVersion"
PATCHES="ccrtp-$portVersion.patchset"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

libVersion="3.0.1"
libVersionCompat="$libVersion compat >= ${libVersion%%.*}"

PROVIDES="
	libccrtp$secondaryArchSuffix = $portVersion
	lib:libccrtp$secondaryArchSuffix = $libVersionCompat
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libcommoncpp$secondaryArchSuffix
	lib:libgcrypt$secondaryArchSuffix
	"

PROVIDES_devel="
	libccrtp${secondaryArchSuffix}_devel = $libVersionCompat
	devel:libccrtp$secondaryArchSuffix = $portVersion
	"
REQUIRES_devel="
	libccrtp$secondaryArchSuffix == $portVersion base
	devel:libcommoncpp$secondaryArchSuffix
	devel:libgcrypt$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libcommoncpp$secondaryArchSuffix
	devel:libgcrypt$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:autoconf
	cmd:automake
	cmd:awk
	cmd:gcc$secondaryArchSuffix
	cmd:ld$secondaryArchSuffix
	cmd:libtool$secondaryArchSuffix
	cmd:make
	cmd:pkg_config$secondaryArchSuffix
	"

BUILD()
{
	./autogen.sh
	runConfigure ./configure --disable-static
	make $jobArgs
}

INSTALL()
{
	make install

	rm -f $libDir/libccrtp.la

	prepareInstalledDevelLibs libccrtp
	fixPkgconfig

	# devel package
	packageEntries devel $developDir
}
