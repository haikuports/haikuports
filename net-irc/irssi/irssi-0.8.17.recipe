LICENSE="GNU GPL v2"
COPYRIGHT="1999-2015 Timo Sirainen"
SUMMARY="An IRC text client"
DESCRIPTION="Irssi is an IRC client written in the C programming language and in normal\
	operation uses a text-mode user interface. Numerous Perl scripts have been\
	made available for Irssi to customise how it looks and operates. Plugins \
	are available which add encryption and protocols such as ICQ and XMPP."
HOMEPAGE="http://www.irssi.org/"
SOURCE_URI="https://github.com/irssi-import/irssi/archive/0.8.17.zip"
CHECKSUM_SHA256="53227ecd768a78cf78cb6da423022ae8361409c224d93a6d789da0dca4a51ca9"
REVISION="1"
ARCHITECTURES="x86_gcc2 x86"
SECONDARY_ARCHITECTURES="x86"
BUILD_PACKAGED_ACTIVATION_PHASE="INSTALL"
STATUS_HAIKU="stable"
PROVIDES="
	botti$secondaryArchSuffix = $portVersion
	cmd:botti$secondaryArchSuffix
  	irssi$secondaryArchSuffix = $portVersion
  	cmd:irssi$secondaryArchSuffix
	"
GLOBAL_WRITABLE_FILES="settings/irssi.conf keep-old"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libglib_2.0$secondaryArchSuffix
	lib:libiconv$secondaryArchSuffix
	lib:libintl$secondaryArchSuffix
	lib:libncurses$secondaryArchSuffix
	lib:libperl$secondaryArchSuffix
	lib:libssl$secondaryArchSuffix
	"

BUILD_REQUIRES="
	devel:libglib_2.0$secondaryArchSuffix
	devel:libncurses$secondaryArchSuffix
	devel:libssl$secondaryArchSuffix
	"

BUILD_PREREQUIRES="
	haiku${secondaryArchSuffix}_devel
	cmd:aclocal
	cmd:autoreconf
	cmd:chmod
	cmd:gcc$secondaryArchSuffix
	cmd:git
	cmd:libtoolize$secondaryArchSuffix
	cmd:links
	cmd:ld$secondaryArchSuffix
	cmd:make
	cmd:pkg_config$secondaryArchSuffix
	"

PATCHES="
	irssi-0.8.17-haiku.patch
	"

BUILD() {
	chmod +x autogen.sh irssi-version.sh file2header.sh
	./autogen.sh
	runConfigure ./configure --with-bot --with-perl --with-socks --with-proxy --enable-true-color
	make $jobArgs
}

INSTALL() {
	make install-strip
}
