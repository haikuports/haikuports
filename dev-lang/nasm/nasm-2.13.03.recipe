SUMMARY="The Netwide Assembler"

DESCRIPTION="The Netwide Assembler, NASM, is an 80x86 and x86-64 assembler \
designed for portability and modularity. It supports a range of object file \
formats, including Linux and *BSD a.out, ELF, COFF, Mach-O, 16-bit and 32-bit \
OBJ (OMF) format, Win32 and Win64. It will also output plain binary files, \
Intel hex and Motorola S-Record formats. Its syntax is designed to be simple \
and easy to understand, similar to the syntax in the Intel Software Developer \
Manual with minimal complexity. It supports all currently known x86 architectural \
extensions, and has strong support for macros. NASM also comes with a set of \
utilities for handling the RDOFF custom object-file format."

HOMEPAGE="https://www.nasm.us/"
COPYRIGHT="1996-2017 the NASM Authors"
LICENSE="BSD (2-clause)"
REVISION="1"
SOURCE_URI="https://www.nasm.us/pub/nasm/releasebuilds/$portVersion/nasm-$portVersion.tar.xz"
CHECKSUM_SHA256="812ecfb0dcbc5bd409aaa8f61c7de94c5b8752a7b00c632883d15b2ed6452573"
PATCHES="nasm-$portVersion.patchset"

ARCHITECTURES="x86_gcc2 x86 x86_64"

PROVIDES="
	nasm = $portVersion compat >= 1
	cmd:nasm = $portVersion compat >= 1
	cmd:ndisasm = $portVersion compat >= 1
	"
REQUIRES="
	haiku
	"

BUILD_REQUIRES="
	haiku_devel
	"
BUILD_PREREQUIRES="
	cmd:awk
	cmd:gcc
	cmd:ld
	cmd:make
	cmd:sed
	"

TEST_REQUIRES="
	cmd:perl
	"

BUILD()
{
	runConfigure ./configure
	make $jobArgs PERL=true
}

INSTALL()
{
	make install PERL=true
}

TEST()
{
	make test
}
