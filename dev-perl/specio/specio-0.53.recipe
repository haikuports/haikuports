SUMMARY="Type constraints and coercions for Perl"
DESCRIPTION="The Specio distribution provides classes for representing type constraints and \
coercion, along with syntax sugar for declaring them.
Note that this is not a proper type system for Perl. Nothing in this distribution will magically \
make the Perl interpreter start checking a value's type on assignment to a variable. In fact, \
there's no built-in way to apply a type to a variable at all.
Instead, you can explicitly check a value against a type, and optionally coerce values to that \
type.
My long-term goal is to replace Moose's built-in types and MooseX::Types with this module."
HOMEPAGE="https://metacpan.org/pod/Specio"
COPYRIGHT="2012 - 2025 by Dave Rolsky"
LICENSE="Artistic"
REVISION="1"
SOURCE_URI="https://cpan.metacpan.org/authors/id/D/DR/DROLSKY/Specio-$portVersion.tar.gz"
CHECKSUM_SHA256="0d0eecfb9e89bd0f5f710fac42e1200a882d513a862f98497eaef5927ac6c183"
SOURCE_DIR="Specio-$portVersion"

ARCHITECTURES="any"

PROVIDES="
	specio = $portVersion
	"
REQUIRES="
	haiku
	clone
	clone_pp
	devel_stacktrace
	eval_closure
	module_implementation
	module_runtime
	mro_compat
	ref_util
	role_tiny
	sub_quote
	test_fatal
	try_tiny
	vendor_perl
	xstring
	"

BUILD_REQUIRES="
	haiku_devel
	"
BUILD_PREREQUIRES="
	cmd:make
	cmd:perl
	"

TEST_REQUIRES="
	clone
	clone_pp
	devel_stacktrace
	eval_closure
	module_implementation
	module_runtime
	mro_compat
	ref_util
	role_tiny
	sub_quote
	test_fatal
	test_needs
	try_tiny
	xstring
	"

BUILD()
{
	perl Makefile.PL PREFIX=$prefix
	make
}

INSTALL()
{
	make pure_install

	# remove architecture-specific files
	cd $prefix
	rm -r $(perl -V:vendorarch | cut -d\' -f2 | cut -d/ -f5-)
		# cut extracts the quoted string and strips the prefix (which is perl's and not ours)
}

TEST()
{
	make test
}
