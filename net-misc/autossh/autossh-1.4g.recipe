SUMMARY="Automatically restart SSH sessions and tunnels"
DESCRIPTION="autossh is a program to start a copy of ssh and monitor it, \
restarting it as necessary should it die or stop passing traffic. The idea is \
from rstunnel (Reliable SSH Tunnel), but implemented in C."
HOMEPAGE="https://www.harding.motd.ca/autossh/"
COPYRIGHT="Carson Harding, 2002-2018."
LICENSE="BSD (2-clause)"
REVISION="1"
SOURCE_URI="https://www.harding.motd.ca/autossh/autossh-$portVersion.tgz"
CHECKSUM_SHA256="5fc3cee3361ca1615af862364c480593171d0c54ec156de79fc421e31ae21277"

ARCHITECTURES="all"

PROVIDES="
	autossh = $portVersion
	cmd:autossh = $portVersion
	"
REQUIRES="
	haiku
	"

BUILD_REQUIRES="
	haiku_devel
	"
BUILD_PREREQUIRES="
	cmd:gcc
	cmd:make
	cmd:ssh
	"

BUILD()
{
	export LIBS="-lnetwork"
	runConfigure --omit-dirs "dataRootDir docDir" ./configure
	make
}

INSTALL()
{
	mkdir -p $dataDir/doc/autossh
	make install
	mkdir -p $documentationDir/packages/autossh
	mv $dataDir/doc/autossh $documentationDir/packages/autossh/doc
	mv $dataDir/examples/autossh $documentationDir/packages/autossh/examples
	rm -rf $dataDir
	rm -rf $prefix/share
}
