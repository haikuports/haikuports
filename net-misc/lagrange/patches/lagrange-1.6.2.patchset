From bddf3a7d4c9527dd63ca5af943f636ff04e7102c Mon Sep 17 00:00:00 2001
From: Nikolay Korotkiy <sikmir@gmail.com>
Date: Tue, 20 Apr 2021 22:59:30 +0300
Subject: Expose main window unconditionaly.

See https://codeberg.org/skyjake/lagrange/pulls/1

diff --git a/src/ui/window.c b/src/ui/window.c
index b8ed210..487710c 100644
--- a/src/ui/window.c
+++ b/src/ui/window.c
@@ -824,6 +824,7 @@ iBool processEvent_Window(iWindow *d, const SDL_Event *ev) {
             SDL_Event event = *ev;
             if (event.type == SDL_USEREVENT && isCommand_UserEvent(ev, "window.unfreeze")) {
                 d->isDrawFrozen = iFalse;
+                d->isExposed = iTrue;
                 if (SDL_GetWindowFlags(d->win) & SDL_WINDOW_HIDDEN) {
                     SDL_ShowWindow(d->win);
                 }
-- 
2.30.2


From e41d58c912665ba9e3871ce6f0e42c057988ca85 Mon Sep 17 00:00:00 2001
From: Nikolay Korotkiy <sikmir@gmail.com>
Date: Sun, 8 Aug 2021 02:48:14 +0300
Subject: Fix freeze on resizing


diff --git a/src/app.c b/src/app.c
index 8318eee..82194df 100644
--- a/src/app.c
+++ b/src/app.c
@@ -1352,7 +1352,7 @@ static int run_App_(iApp *d) {
     d->isRunning = iTrue;
     SDL_EventState(SDL_DROPFILE, SDL_ENABLE); /* open files via drag'n'drop */
 #if defined (iPlatformDesktop)
-    SDL_AddEventWatch(resizeWatcher_, d); /* redraw window during resizing */
+    //SDL_AddEventWatch(resizeWatcher_, d); /* redraw window during resizing */
 #endif
     while (d->isRunning) {
         dispatchCommands_Periodic(&d->periodic);
-- 
2.30.2

