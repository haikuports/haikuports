From 9b8a74f9a3037ac423ab4edf27dbe9bab04b3fbe Mon Sep 17 00:00:00 2001
From: Adrien Destugues <pulkomandy@gmail.com>
Date: Mon, 6 Oct 2014 18:21:18 +0200
Subject: Fix install paths.


diff --git a/CMakeLists.txt b/CMakeLists.txt
index 496712d..55a0312 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -90,7 +90,7 @@ endif()
 
 set(version 3.0.1)
 set(libdir ${CMAKE_INSTALL_PREFIX}/lib${LIB_SUFFIX})
-set(includedir ${CMAKE_INSTALL_PREFIX}/include)
+set(includedir ${CMAKE_INSTALL_PREFIX}/develop/headers${LIB_SUFFIX})
 
 configure_file(graphite2.pc.in graphite2.pc)
 
diff --git a/gr2fonttest/CMakeLists.txt b/gr2fonttest/CMakeLists.txt
index f995dd3..81de17c 100644
--- a/gr2fonttest/CMakeLists.txt
+++ b/gr2fonttest/CMakeLists.txt
@@ -18,4 +18,4 @@ if (BUILD_SHARED_LIBS)
     add_dependencies(${PROJECT_NAME}_copy_dll graphite2 gr2fonttest)
 endif()
 
-install(TARGETS gr2fonttest EXPORT gr2fonttest RUNTIME DESTINATION bin)
+install(TARGETS gr2fonttest EXPORT gr2fonttest RUNTIME DESTINATION bin${LIB_SUFFIX})
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 389cf5a..d26edf9 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -152,5 +152,5 @@ if  (${CMAKE_SYSTEM_NAME} STREQUAL "Windows")
 endif()
 
 
-install(TARGETS graphite2 EXPORT graphite2 LIBRARY DESTINATION lib${LIB_SUFFIX} ARCHIVE DESTINATION lib${LIB_SUFFIX} PUBLIC_HEADER DESTINATION include/graphite2 RUNTIME DESTINATION bin)
-install(EXPORT graphite2 DESTINATION share/graphite2 NAMESPACE gr2_)
+install(TARGETS graphite2 EXPORT graphite2 LIBRARY DESTINATION lib${LIB_SUFFIX} ARCHIVE DESTINATION lib${LIB_SUFFIX} PUBLIC_HEADER DESTINATION develop/headers${LIB_SUFFIX}/graphite2 RUNTIME DESTINATION bin${LIB_SUFFIX})
+install(EXPORT graphite2 DESTINATION data/graphite2 NAMESPACE gr2_)
-- 
2.19.1

From 9c1058e4a851f29ae82a80a4e3578b620c2ea03d Mon Sep 17 00:00:00 2001
From: 2876225417 <2876225417@qq.com>
Date: Thu, 19 Jun 2025 15:59:11 +0800
Subject: [PATCH] Fix(tests): Add missing <cstdint> for modern compilers

---
 tests/featuremap/featuremaptest.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/tests/featuremap/featuremaptest.cpp b/tests/featuremap/featuremaptest.cpp
index 5eb240c8..c919dc1e 100644
--- a/tests/featuremap/featuremaptest.cpp
+++ b/tests/featuremap/featuremaptest.cpp
@@ -9,6 +9,10 @@
 #include <string>
 #include <vector>
 
+#include <cstdint>
+
+
+
 #include <graphite2/Font.h>
 
 #include "inc/Endian.h"
-- 
2.19.1

From bdcefa044ed5828588a24dad28db6764f96d1a87 Mon Sep 17 00:00:00 2001
From: Alexander von Gluck IV <alex@terarocket.io>
Date: Tue, 26 Aug 2025 09:24:28 -0500
Subject: [PATCH] CMake: Raise required version to 3.5

Modified patch of original by Heiko Becker

CMake >= 4.0.0 removed compatibility with versions < 3.5 and errors
out with such versions passed to cmake_minimum_required().

Furthermore at least 3.1 was already required, because that's the
version, which introduced CXX_STANDARD{,_REQUIRED}.

Also remove the FATAL_ERROR part, which has been ignored since 2.6. and
CMP0012 is now implicitly assumed to be NEW already.
---
 CMakeLists.txt                    | 3 +--
 gr2fonttest/CMakeLists.txt        | 2 +-
 src/CMakeLists.txt                | 3 +--
 tests/bittwiddling/CMakeLists.txt | 2 +-
 tests/json/CMakeLists.txt         | 2 +-
 tests/sparsetest/CMakeLists.txt   | 2 +-
 tests/utftest/CMakeLists.txt      | 2 +-
 7 files changed, 7 insertions(+), 9 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 496712d..5b1f90e 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,5 +1,4 @@
-CMAKE_MINIMUM_REQUIRED(VERSION 2.8.0 FATAL_ERROR)
-cmake_policy(SET CMP0012 NEW)
+cmake_minimum_required(VERSION 3.5.0)
 include(TestBigEndian)
 find_package(PythonInterp 3.6)
 project(graphite2)
diff --git a/gr2fonttest/CMakeLists.txt b/gr2fonttest/CMakeLists.txt
index f995dd3..5e1ea26 100644
--- a/gr2fonttest/CMakeLists.txt
+++ b/gr2fonttest/CMakeLists.txt
@@ -1,4 +1,4 @@
-CMAKE_MINIMUM_REQUIRED(VERSION 2.8.0 FATAL_ERROR)
+cmake_minimum_required(VERSION 3.5.0)
 
 project(gr2fonttest)
 
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index b6ac26b..dd4fffa 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -19,9 +19,8 @@
 #    Suite 500, Boston, MA 02110-1335, USA or visit their web page on the
 #    internet at http://www.fsf.org/licenses/lgpl.html.
 
-CMAKE_MINIMUM_REQUIRED(VERSION 2.8.0 FATAL_ERROR)
+cmake_minimum_required(VERSION 3.5.0)
 project(graphite2_core)
-cmake_policy(SET CMP0012 NEW)
 INCLUDE(CheckCXXSourceCompiles)
 
 set(GRAPHITE_API_CURRENT 3)
diff --git a/tests/bittwiddling/CMakeLists.txt b/tests/bittwiddling/CMakeLists.txt
index 372b4ac..a7cd01d 100644
--- a/tests/bittwiddling/CMakeLists.txt
+++ b/tests/bittwiddling/CMakeLists.txt
@@ -1,4 +1,4 @@
-CMAKE_MINIMUM_REQUIRED(VERSION 2.8.0 FATAL_ERROR)
+cmake_minimum_required(VERSION 3.5.0)
 project(bits)
 include(Graphite)
 include_directories(${graphite2_core_SOURCE_DIR})
diff --git a/tests/json/CMakeLists.txt b/tests/json/CMakeLists.txt
index ae33427..cad0aae 100644
--- a/tests/json/CMakeLists.txt
+++ b/tests/json/CMakeLists.txt
@@ -1,4 +1,4 @@
-CMAKE_MINIMUM_REQUIRED(VERSION 2.8.0 FATAL_ERROR)
+cmake_minimum_required(VERSION 3.5.0)
 project(jsontest)
 include(Graphite)
 include_directories(${graphite2_core_SOURCE_DIR})
diff --git a/tests/sparsetest/CMakeLists.txt b/tests/sparsetest/CMakeLists.txt
index 3bfdc0c..8c1583e 100644
--- a/tests/sparsetest/CMakeLists.txt
+++ b/tests/sparsetest/CMakeLists.txt
@@ -1,4 +1,4 @@
-CMAKE_MINIMUM_REQUIRED(VERSION 2.8.0 FATAL_ERROR)
+cmake_minimum_required(VERSION 3.5.0)
 project(sparsetest)
 include(Graphite)
 include_directories(${graphite2_core_SOURCE_DIR})
diff --git a/tests/utftest/CMakeLists.txt b/tests/utftest/CMakeLists.txt
index dc50ca4..94f8eb5 100644
--- a/tests/utftest/CMakeLists.txt
+++ b/tests/utftest/CMakeLists.txt
@@ -1,4 +1,4 @@
-CMAKE_MINIMUM_REQUIRED(VERSION 2.8.0 FATAL_ERROR)
+cmake_minimum_required(VERSION 3.5.0)
 project(utftest)
 include(Graphite)
 include_directories(${graphite2_core_SOURCE_DIR})
-- 
2.51.0

