SUMMARY="A command-line decoder for raw digital photos"
DESCRIPTION="dcraw decodes raw photos, displays metadata, and extracts thumbnails."
HOMEPAGE="http://dechifro.org/dcraw/"
COPYRIGHT="1997-2015 Dave Coffin"
LICENSE="GNU GPL v2"
REVISION="3"
SOURCE_URI="http://dechifro.org/dcraw/archive/dcraw-$portVersion.tar.gz"
CHECKSUM_SHA256="2890c3da2642cd44c5f3bfed2c9b2c1db83da5cec09cc17e0fa72e17541fb4b9"
SOURCE_DIR="dcraw"

ARCHITECTURES="ALL !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	dcraw$secondaryArchSuffix = $portVersion compat >= 9
	cmd:dcraw = $portVersion compat >= 9
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libjasper$secondaryArchSuffix
	lib:libjpeg$secondaryArchSuffix
	lib:liblcms2$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libjasper$secondaryArchSuffix
	devel:libjpeg$secondaryArchSuffix
	devel:liblcms2$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:gcc$secondaryArchSuffix
	"

BUILD()
{
	gcc -O3 -o dcraw dcraw.c -llcms2 -ljasper -ljpeg
}

INSTALL()
{
	mkdir -p $prefix/bin $manDir/man1
	cp dcraw $prefix/bin
	cp dcraw.1 $manDir/man1
}
