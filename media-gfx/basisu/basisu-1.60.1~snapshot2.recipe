SUMMARY="Basis Universal GPU Texture Codec"
DESCRIPTION="Basis Universal is an open source supercompressed LDR/HDR GPU compressed texture interchange system from Binomial LLC that supports \
two intermediate file formats: the .KTX2 open standard from the Khronos Group, and our own ".basis" file format.
These file formats support rapid transcoding to virtually any compressed GPU texture format released in the past ~25 years."
HOMEPAGE="https://github.com/BinomialLLC/basis_universal"
COPYRIGHT="2019-2025 Binomial LLC"
LICENSE="Apache v2"
REVISION="1"
SOURCE_URI="https://github.com/BinomialLLC/basis_universal/archive/refs/tags/v1_60_snapshot.tar.gz"
CHECKSUM_SHA256="e3e0f0cd16910d36b14f63ad9eca01fb3da321a3486b96722693d6673c9e1ae8"
PATCHES="basisu-$portVersion.patchset"
SOURCE_DIR="basis_universal-1_60_snapshot"

ARCHITECTURES="all ?x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	basisu$secondaryArchSuffix = $portVersion
	cmd:basisu = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	#lib:libopencl$secondaryArchSuffix # Optional, OpenCL support
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	#devel:libopencl$secondaryArchSuffix # Optional, OpenCL support
	#devel:libopencl_headers$secondaryArchSuffix # Optional, OpenCL support
	"
BUILD_PREREQUIRES="
	cmd:cmake
	cmd:gcc$secondaryArchSuffix
	cmd:make
	"

BUILD()
{
	cmake . -DCMAKE_BUILD_TYPE=Release -DEXAMPLES=OFF #-DOPENCL=ON

	make $jobArgs
}

INSTALL()
{
	mkdir -p $prefix/bin && cp -t $prefix/bin bin/basisu

	# Pack docs
	mkdir -p $docDir && cp -t $docDir README.md
}
