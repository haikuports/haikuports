SUMMARY="Free Software LHA implementation"
DESCRIPTION="Lhasa is a library for parsing LHA (.lzh) archives and a free\
replacement for the Unix LHA tool.\
\
Currently it is only possible to read from (i.e. decompress) archives;\
generating (compressing) LHA archives may be an enhancement for future\
versions. The aim is to be compatible with as many different variants\
of the LHA file format as possible, including LArc (.lzs) and PMarc\
(.pma).  A suite of archives generated from different tools is\
included for regression testing. Type 'make check' to run the tests.\
\
The command line tool aims to be interface-compatible with the\
non-free Unix LHA tool (command line syntax and output), for backwards\
compatibility with tools that expect particular output.\
\
Lhasa is licensed under the ISC license, which is a simplified version\
of the MIT/X11 license that is functionally identical."
HOMEPAGE="http://fragglet.github.io/lhasa/"
COPYRIGHT="2023 Simon Howard "
LICENSE="COPYING"
REVISION="2"
SOURCE_URI="https://github.com/fragglet/lhasa/archive/refs/tags/v$portVersion.tar.gz"
CHECKSUM_SHA256="ad76d763c7e91f47fde455a1baef4bfb0d1debba424039eabe0140fa8f115c5e"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	cmd:lha
	lib:liblhasa$secondaryArchSuffix
	lhasa$secondaryArchSuffix = $portVersion
	"
PROVIDES_devel="
	devel:liblhasa$secondaryArchSuffix
	"	
REQUIRES="
	haiku$secondaryArchSuffix
	"
BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"
BUILD_PREREQUIRES="
	cmd:aclocal
	cmd:autoconf
	cmd:automake
	cmd:gcc$secondaryArchSuffix
	cmd:libtoolize$secondaryArchSuffix
	cmd:make
	cmd:pkg_config$secondaryArchSuffix
	"

BUILD()
{
	./autogen.sh
	runConfigure --omit-dirs "binDir" \
	./configure --bindir=$binDir
		make $jobArgs
}

INSTALL()
{
	make install 
	
	packageEntries devel \
		$developDir
}
