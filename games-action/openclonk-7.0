SUMMARY="Free multiplayer action game"
DESCRIPTION="OpenClonk is a free multiplayer action game in which you
control\ clonks, small, but witty and nimble humanoid beings. The game
is mainly about\
mining, settling and fast-paced melees."
HOMEPAGE="http://www.openclonk.org"
COPYRIGHT="2009-2016 The OpenClonk Team and contributors"
LICENSE="ISC"
SOURCE_URI="http://www.openclonk.org/builds/release/$portVersion/openclonk-$portVersion-src.tar.bz2"
CHECKSUM_SHA256="bc1a231d72774a7aa8819e54e1f79be27a21b579fb057609398f2aa5700b0732"
SOURCE_DIR="openclonk-$portVersion-src"

ARCHITECTURES="x86_gcc2 x86 x86_64"

PROVIDES="
        openclonk$secondaryArchSuffix = $portVersion
        app:OpenClonk$secondaryArchSuffix = $portVersion
	appdata$secondaryArchSuffix = $portVersion
    	appdata(openclonk.appdata.xml)$secondaryArchSuffix = $portVersion
    	application$secondaryArchSuffix = $portVersion
    	application$secondaryArchSuffix = $portVersion
    	bundled(timsort$secondaryArchSuffix = $portVersion
   	mimehandler(x-scheme-handler/clonk)$secondaryArchSuffix = $portVersion
   	openclonk(x86-64)$secondaryArchSuffix = $portVersion
        "
REQUIRES="
        haiku$secondaryArchSuffix
        lib:zlib$secondaryArchSuffix
        lib:libpng$secondaryArchSuffix
        lib:libjpeg_turbo$secondaryArchSuffix
        lib:libfreetype$secondaryArchSuffix
        lib:libogg$secondaryArchSuffix
        lib:libvorbis$secondaryArchSuffix
        lib:libxrandr$secondaryArchSuffix
	lib:libGL$secondaryArchSuffix
	lib:libGLEW$secondaryArchSuffix
	lib:libGLU$secondaryArchSuffix
	lib:libX11$secondaryArchSuffix
	lib:libault$secondaryArchSuffix
	lib:libat-1.0k$secondaryArchSuffix
	lib:libc$secondaryArchSuffix
	lib:libcairo-gobject$secondaryArchSuffix
	lib:libcairo$secondaryArchSuffix
	lib:libgcc_s$secondaryArchSuffix
	lib:libgdk-3$secondaryArchSuffix
	lib:libgdk_pixbuf-2.0$secondaryArchSuffix
	lib:libgio-2.0$secondaryArchSuffix
	lib:libglib-2.0$secondaryArchSuffix
	lib:libgobject-2.0$secondaryArchSuffix
	lib:libgthread-2.0$secondaryArchSuffix
	lib:libgtk-3$secondaryArchSuffix
	lib:libixml$secondaryArchSuffix
	lib:libm$secondaryArchSuffix
	lib:libopenal$secondaryArchSuffix
	lib:libpango-1.0$secondaryArchSuffix
	lib:libpangocairo-1.0$secondaryArchSuffix
	lib:libpng16$secondaryArchSuffix
	lib:libpthread$secondaryArchSuffix
	lib:librt$secondaryArchSuffix
	lib:libstdc++$secondaryArchSuffix
	lib:libthreadutil$secondaryArchSuffix
	lib:libtinyxml$secondaryArchSuffix
	lib:libupnp$secondaryArchSuffix
	lib:libvorbisfile$secondaryArchSuffix
	lib:libz$secondaryArchSuffix
        "
BUILD_REQUIRES"
        haiku_devel$secondaryArchSuffix
	devel:g++$secondaryArchSuffix
        devel:zlib$secondaryArchSuffix
        devel:libpng$secondaryArchSuffix
        devel:libjpeg_turbo$secondaryArchSuffix
        devel:libfreetype$secondaryArchSuffix
        devel:libogg$secondaryArchSuffix
        devel:libvorbis$secondaryArchSuffix
        devel:libxrandr$secondaryArchSuffix
	devel:libGL$secondaryArchSuffix
	devel:libGLEW$secondaryArchSuffix
	devel:libGLU$secondaryArchSuffix
	devel:libX11$secondaryArchSuffix
	devel:libault$secondaryArchSuffix
	devel:libat-1.0k$secondaryArchSuffix
	devel:libc$secondaryArchSuffix
	devel:libcairo-gobject$secondaryArchSuffix
	devel:libcairo$secondaryArchSuffix
	devel:libgcc_s$secondaryArchSuffix
	devel:libgdk-3$secondaryArchSuffix
	devel:libgdk_pixbuf-2.0$secondaryArchSuffix
	devel:libgio-2.0$secondaryArchSuffix
	devel:libglib-2.0$secondaryArchSuffix
	devel:libgobject-2.0$secondaryArchSuffix
	devel:libgthread-2.0$secondaryArchSuffix
	devel:libgtk-3$secondaryArchSuffix
	devel:libixml$secondaryArchSuffix
	devel:libm$secondaryArchSuffix
	devel:libopenal$secondaryArchSuffix
	devel:libpango-1.0$secondaryArchSuffix
	devel:libpangocairo-1.0$secondaryArchSuffix
	devel:libpng16$secondaryArchSuffix
	devel:libpthread$secondaryArchSuffix
	devel:librt$secondaryArchSuffix
	devel:libstdc++$secondaryArchSuffix
	devel:libthreadutil$secondaryArchSuffix
	devel:libtinyxml$secondaryArchSuffix
	devel:libupnp$secondaryArchSuffix
	devel:libvorbisfile$secondaryArchSuffix
	devel:libz$secondaryArchSuffix
        "
BUILD_PREREQUIRES="
	cmd:cmake
        cmd:g++$secondaryArchSuffix
	cmd:gcc$secondaryArchSuffix
        cmd:make
        "
BUILD()
{
       mkdir -p build
	cd build
	cmake .. -DCMAKE_INSTALL_PREFIX=$prefix -DDATAROOTDIR=$dataDir \
		-DENABLE_DESKTOP_ENTRY=OFF -DMANDIR=$manDir -DDOCDIR=$docDir
	make $jobArgs
}

INSTALL()
{
	cd build
        make install
}
