From fbc438cdc0e39b869399e33d90680b0244e51bd4 Mon Sep 17 00:00:00 2001
From: Ivan Holmes <ivan@ivanholmes.co.uk>
Date: Sun, 8 May 2022 19:19:44 +0100
Subject: patches for Haiku support


diff --git a/CMakeLists.txt b/CMakeLists.txt
index 639c859..5186a65 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -93,6 +93,11 @@ elseif(APPLE)
 		${GAME_MAC_ICNS}
 		${SDL2_LIBRARIES}
 	)
+elseif(HAIKU)
+	# Add libbe
+	list(APPEND GAME_LIBRARIES "-lbe")
+	
+	add_executable(${GAME_TARGET} ${GAME_ALL_SOURCES})
 else()
 	# Math lib, explicitly required on some Linux systems
 	list(APPEND GAME_LIBRARIES m)
diff --git a/cmake/FindSDL2.cmake b/cmake/FindSDL2.cmake
index e712dc3..bd22a3d 100644
--- a/cmake/FindSDL2.cmake
+++ b/cmake/FindSDL2.cmake
@@ -55,7 +55,7 @@ elseif(APPLE)
 else()
     find_path(SDL2_INCLUDE_DIRS "SDL.h"
         HINTS $ENV{SDL2DIR}
-        PATH_SUFFIXES "include/SDL2" "include"
+        PATH_SUFFIXES "include/SDL2" "include" "SDL2"
         REQUIRED
     )
 
diff --git a/src/Main.cpp b/src/Main.cpp
index d59905c..d0ca9d3 100644
--- a/src/Main.cpp
+++ b/src/Main.cpp
@@ -17,6 +17,9 @@
 #include "killmacmouseacceleration.h"
 #include <libproc.h>
 #include <unistd.h>
+#elif defined(__HAIKU__)
+#include <Path.h>
+#include <FindDirectory.h>
 #endif
 
 extern "C"
@@ -51,6 +54,11 @@ static fs::path FindGameData()
 
 	dataPath = pathbuf;
 	dataPath = dataPath.parent_path().parent_path() / "Resources";
+#elif defined(__HAIKU__)
+	BPath appsBPath;
+	find_directory(B_SYSTEM_APPS_DIRECTORY, &appsBPath);
+	dataPath = appsBPath.Path();
+	dataPath = dataPath / "Bugdom" / "Data";
 #else
 	dataPath = "Data";
 #endif
-- 
2.30.2

