From 3c67307d98ce55c27526bb39e3f667624f9a1247 Mon Sep 17 00:00:00 2001
From: Abdur-Raheem Idowu <abdurraheemidowu@gmail.com>
Date: Fri, 27 Dec 2019 08:23:50 +0000
Subject: Patched SDL includes


diff --git a/src/djgraph.h b/src/djgraph.h
index b2f1cc9..bb57015 100644
--- a/src/djgraph.h
+++ b/src/djgraph.h
@@ -9,7 +9,7 @@ Copyright (C) 1998-2018 David Joffe
 #ifndef _DJGRAPH_H_
 #define _DJGRAPH_H_
 
-#include "SDL.h"
+#include <SDL/SDL.h>
 #include "mmgr/mmgr.h"
 
 #include "djimage.h"
diff --git a/src/game.cpp b/src/game.cpp
index c461108..ca442fd 100644
--- a/src/game.cpp
+++ b/src/game.cpp
@@ -45,7 +45,7 @@ using namespace std;
 #include "instructions.h"//Slightly don't like this dependency. For ShowInstructions() from in-game menu. [dj2017-08]
 
 #ifndef NOSOUND
-#include <SDL_mixer.h>//For background music stuff
+#include <SDL/SDL_mixer.h>//For background music stuff
 Mix_Music* g_pGameMusic=NULL;
 #endif
 
diff --git a/src/graph.cpp b/src/graph.cpp
index 5d12043..8095da0 100644
--- a/src/graph.cpp
+++ b/src/graph.cpp
@@ -14,7 +14,7 @@ Copyright (C) 1998-2018 David Joffe
 #include <stdio.h>
 #include <string.h>
 #include <stdlib.h>
-#include "SDL.h"
+#include <SDL/SDL.h>
 #include "sys_log.h"//Log
 #include "djstring.h"//djStrPrintf
 
diff --git a/src/keys.cpp b/src/keys.cpp
index abf8fbc..b8abd95 100644
--- a/src/keys.cpp
+++ b/src/keys.cpp
@@ -8,7 +8,7 @@ Created: 09/2001
 
 #include "keys.h"
 #include "settings.h"
-#include "SDL.h"
+#include <SDL/SDL.h>
 #include <vector>
 using namespace std;
 
diff --git a/src/main.cpp b/src/main.cpp
index 183b95a..a7ef3b9 100644
--- a/src/main.cpp
+++ b/src/main.cpp
@@ -51,7 +51,7 @@ Copyright (C) 1995-2018 David Joffe
 #endif
 #endif
 
-#include <SDL_mixer.h>//For background music stuff
+#include <SDL/SDL_mixer.h>//For background music stuff
 
 #include <map>
 #include <string>
diff --git a/src/sdl/djgraph.cpp b/src/sdl/djgraph.cpp
index ea61fca..f3a7275 100644
--- a/src/sdl/djgraph.cpp
+++ b/src/sdl/djgraph.cpp
@@ -15,7 +15,7 @@ Copyright (C) 1997-2018 David Joffe
 
 #include "../djgraph.h"
 #include "../sys_log.h"
-#include "SDL.h"
+#include <SDL/SDL.h>
 
 #include <string.h>
 
diff --git a/src/sdl/djsound.cpp b/src/sdl/djsound.cpp
index 5a3e2c9..8ebb875 100644
--- a/src/sdl/djsound.cpp
+++ b/src/sdl/djsound.cpp
@@ -7,10 +7,10 @@ Copyright (C) 1999-2018 David Joffe and Kent Mein
 #include "../djsound.h"
 #include "../djstring.h"
 #include "../djlog.h"
-#include <SDL_audio.h>
-#include <SDL_error.h>
+#include <SDL/SDL_audio.h>
+#include <SDL/SDL_error.h>
 #ifndef NOSOUND
-#include <SDL_mixer.h>
+#include <SDL/SDL_mixer.h>
 #endif
 
 #ifdef __APPLE__
diff --git a/src/sdl/djtime.cpp b/src/sdl/djtime.cpp
index 2fa173d..355fe90 100644
--- a/src/sdl/djtime.cpp
+++ b/src/sdl/djtime.cpp
@@ -5,7 +5,7 @@ Copyright (C) 1999-2018 David Joffe
 */
 
 #include "../djtime.h"
-#include "SDL.h"
+#include <SDL/SDL.h>
 #ifdef WIN32
 #include <windows.h>
 #include <mmsystem.h>
-- 
2.19.0


From 959282a962504b226474f57912057951a6296e56 Mon Sep 17 00:00:00 2001
From: Abdur-Raheem Idowu <abdurraheemidowu@gmail.com>
Date: Fri, 27 Dec 2019 19:52:26 +0000
Subject: Corrected settings directory


diff --git a/src/djstring.cpp b/src/djstring.cpp
index 76237f9..30b0643 100644
--- a/src/djstring.cpp
+++ b/src/djstring.cpp
@@ -284,6 +284,9 @@ std::string djGetFolderUserSettings()
 #ifdef WIN32
	std::string s = getenv("APPDATA");
	djAppendPathS(s, "DaveGnukem");
+#elif __HAIKU__
+	std::string s = getenv("HOME");
+	djAppendPathS(s, "config/settings/.gnukem");
 #else
	std::string s = getenv("HOME");
	djAppendPathS(s, ".gnukem");//?
--
2.19.0


From 2504804577616077c575acc3b489fded55188a46 Mon Sep 17 00:00:00 2001
From: Abdur-Raheem Idowu <abdurraheemidowu@gmail.com>
Date: Sat, 28 Dec 2019 09:51:46 +0000
Subject: Allows launch from deskbar


diff --git a/src/main.cpp b/src/main.cpp
index a7ef3b9..9900d99 100644
--- a/src/main.cpp
+++ b/src/main.cpp
@@ -38,6 +38,11 @@ Copyright (C) 1995-2018 David Joffe
 #include "sys_log.h"
 #include "sys_error.h"
 
+#ifdef __HAIKU__
+#include <libgen.h>
+#include <unistd.h>
+#endif
+
 #ifdef __APPLE__
 #include <mach-o/dyld.h>//_NSGetExecutablePath
 #include <sys/stat.h>//For djFolderExists stuff
@@ -114,6 +119,11 @@ CMenu mainMenu ( "main.cpp:mainMenu" );
 // This is the 'main' function. The big cheese.
 int main ( int argc, char** argv )
 {
+
+#ifdef __HAIKU__
+	chdir(dirname(argv[0]));
+#endif
+
	// Check commandline args
	bool bfullscreen = false;
	bool b640 = false;
-- 
2.19.0

