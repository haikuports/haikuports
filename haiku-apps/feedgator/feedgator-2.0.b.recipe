SUMMARY="Feed the Gator"
DESCRIPTION="FeedGator is a feed/RSS aggregator. \
It's a native python3 program that uses Haiku APIs through Haiku-PyAPI \
wrapper and the feedparser module. \
Check the settings to enable some features like automated feed checks \
or launch minimized. \
The code is released under MIT license."
HOMEPAGE="https://github.com/tmtfx/feedgator"
COPYRIGHT="2024 Fabio Tomat (TmTFx)"
LICENSE="MIT"
REVISION="2"
srcGitRev="2.0.b"
SOURCE_URI="https://github.com/tmtfx/FeedGator/archive/refs/tags/2.0.b-HPKG.tar.gz"
CHECKSUM_SHA256="837e4808513ee51136fe3cd26954fbe067a1204202a2dfc2d2ddbc36f230faae"
SOURCE_DIR="FeedGator-$srcGitRev-HPKG"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"
DISABLE_SOURCE_PACKAGE="yes"

PROVIDES="
	feedgator = $portVersion
	app:FeedGator = $portVersion
	cmd:feedgator.py
	"

REQUIRES="
	haiku
	haiku_pyapi
	feedparser
	"
PYTHON_PACKAGES+=(python310)
PYTHON_VERSIONS+=(3.10)
for i in "${!PYTHON_PACKAGES[@]}"; do
	pythonPackage=${PYTHON_PACKAGES[i]}
	pythonVersion=${PYTHON_VERSIONS[$i]}

	REQUIRES+="
		haiku_pyapi_$pythonPackage
		feedparser_$pythonPackage
		"
done

INSTALL()
{
	mkdir -p $appsDir/BGator2 $binDir $dataDir/BGator2
	cp FeedGator.py $appsDir/BGator2
	cp -R Data/* $dataDir/BGator2
	ln -sfn $appsDir/BGator2/FeedGator.py $binDir/FeedGator.py
	ln -sfn $appsDir/BGator2/FeedGator.py $appsDir/BGator2/FeedGator
	addAppDeskbarSymlink $appsDir/BGator2/FeedGator
}
