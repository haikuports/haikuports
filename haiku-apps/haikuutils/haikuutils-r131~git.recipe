SUMMARY="A tool to manage teams and threads"
DESCRIPTION="SystemManager shows all running teams and lets you explore various team objects \
(images, threads, semaphores, etc.). It also generates stack traces of selected threads.
provide stack trace of selected thread.

Warning! This software is incomplete."
HOMEPAGE="https://github.com/X547/HaikuUtils"
COPYRIGHT="2020 X512"
LICENSE="MIT"
REVISION="1"
srcGitRev="d2d7c366340d1002b3fbd34dca657db1596e4e5f"
SOURCE_URI="$HOMEPAGE/archive/$srcGitRev.tar.gz"
CHECKSUM_SHA256="0eaec032980f79f1144b11d6062aca30b86f3ef314bbfecb5573b313117b80b6"
SOURCE_FILENAME="HaikuUtils-$srcGitRev-$portVersion.tar.gz"
SOURCE_DIR="HaikuUtils-$srcGitRev"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	haikuutils$secondaryArchSuffix = $portVersion
	cmd:MsgDump
	cmd:PictureView
	cmd:Services
	cmd:SystemManager
	cmd:TraverseApps
	cmd:Users
	"
REQUIRES="
	haiku$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"
BUILD_PREREQUIRES="
	makefile_engine
	cmd:make
	cmd:gcc$secondaryArchSuffix
	"

Utils="MsgDump PictureView Services SystemManager TraverseApps Users"
DeskbarUtils="Services SystemManager Users"

BUILD()
{
	for f in $Utils; do
		pushd $f
			make $jobArgs OBJ_DIR=objects
		popd
	done
}

INSTALL()
{
	mkdir -p $prefix/bin $dataDir/deskbar/menu/Applications/HaikuUtils
	for f in $Utils; do
		pushd $f
			cp objects/$f $prefix/bin
		popd
	done

	for f in $DeskbarUtils; do
		pushd $f
			addAppDeskbarSymlink $prefix/bin/$f HaikuUtils/$f
		popd
	done
}
