SUMMARY="The Haiku IDE"
DESCRIPTION="Genio is a native IDE for the Haiku operating system. \
It has a rich editor supporting syntax highlighting, auto completion and other advanced features. \
It contains a set of templates to quickly develop and build your projects."
HOMEPAGE="https://github.com/Genio-The-Haiku-IDE/Genio/releases"
COPYRIGHT="2022-2024 The Genio Team"
LICENSE="BSD (3-clause)
	MIT"
REVISION="1"
SOURCE_URI="https://github.com/Genio-The-Haiku-IDE/Genio/archive/v2.1.tar.gz"
CHECKSUM_SHA256="97e46dd5523702a4c7d91c68aee7806d4acab9a7b4b58fe4756429d00c101ffc"
SOURCE_FILENAME="Genio-v2.1.tar.gz"
SOURCE_DIR="Genio-2.1"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	genio${secondaryArchSuffix} = $portVersion
	app:Genio = $portVersion
	"
REQUIRES="
	haiku${secondaryArchSuffix}
	gcc${secondaryArchSuffix}_syslibs_devel
	llvm17${secondaryArchSuffix}_clang
	lib:liblexilla$secondaryArchSuffix >= 5.2.4
	lib:libgit2$secondaryArchSuffix
	lib:libyaml_cpp$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:liblexilla$secondaryArchSuffix >= 5.2.4
	devel:libgit2$secondaryArchSuffix >= 1.5
	devel:libyaml_cpp$secondaryArchSuffix >= 0.8
	"
BUILD_PREREQUIRES="
	makefile_engine
	cmd:gcc$secondaryArchSuffix
	cmd:make
	"

BUILD()
{
	make OBJ_DIR=objects \
		BUILDHOME=`finddir B_SYSTEM_DEVELOP_DIRECTORY` \
		$jobArgs
	make bindcatalogs OBJ_DIR=objects \
		BUILDHOME=`finddir B_SYSTEM_DEVELOP_DIRECTORY`
}

INSTALL()
{
	install -m 0755 -d "$appsDir/Genio"
	install -m 0755 -t "$appsDir/Genio/" app/Genio
	cp -a data "$appsDir/Genio/"

	install -m 0755 -d "$docDir"
	install -m 0644 -t "$docDir" Readme.md

	addAppDeskbarSymlink $appsDir/Genio/Genio
}
