From 1961fc86eb83ba59e95c651cffaa39bf6d2c3d9a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?J=C3=A9r=C3=B4me=20Duval?= <jerome.duval@gmail.com>
Date: Wed, 22 Oct 2025 21:42:17 +0200
Subject: fix build on newer gcc


diff --git a/build/BuildServiceRules b/build/BuildServiceRules
index e60d55e..5aa0f2f 100644
--- a/build/BuildServiceRules
+++ b/build/BuildServiceRules
@@ -99,6 +99,11 @@ rule SysSubDirHdrs
 	SYSSUBDIRHDRS += [ FDirName $(<) ] ;
 }
 
+rule FIncludes
+{
+	return $(HDRS_LOCAL_INCLUDES_OPTION)$(<) ;
+}
+
 rule FSysIncludes
 {
 	return $(HDRS_SYSTEM_INCLUDES_OPTION)$(<) ;
diff --git a/build/OverriddenJamRules b/build/OverriddenJamRules
index b22139c..22b6866 100644
--- a/build/OverriddenJamRules
+++ b/build/OverriddenJamRules
@@ -32,7 +32,11 @@ actions Chmod1
 # changes to rules for sake of discrimination between system and non-system
 # headers
 
-if $(OSPLAT) = X86 {
+if $(TARGET_PLATFORM) = haiku64 {
+	HDRS_INCLUDES_SEPARATOR ?= ;
+	HDRS_LOCAL_INCLUDES_OPTION ?= -iquote ;
+	HDRS_SYSTEM_INCLUDES_OPTION ?= -I ;
+} else if $(OSPLAT) = X86 {
 	HDRS_INCLUDES_SEPARATOR ?= -I- ;
 	HDRS_LOCAL_INCLUDES_OPTION ?= -I ;
 	HDRS_SYSTEM_INCLUDES_OPTION ?= -I ;
diff --git a/third_party/agg/font_freetype/agg_font_freetype.cpp b/third_party/agg/font_freetype/agg_font_freetype.cpp
index 7b580a3..91e0c65 100644
--- a/third_party/agg/font_freetype/agg_font_freetype.cpp
+++ b/third_party/agg/font_freetype/agg_font_freetype.cpp
@@ -157,7 +157,7 @@ namespace agg
 
         FT_Vector*  point;
         FT_Vector*  limit;
-        char*       tags;
+        unsigned char*       tags;
 
         int   n;         // index of contour in outline
         int   first;     // index of first point in contour
-- 
2.51.0

