SUMMARY="A tool for session attach/detach support"
DESCRIPTION="abduco provides session management i.e. it allows programs to be
run independently from their controlling terminal. That is programs can be
detached - run in the background - and then later reattached. Together with
\`dvtm\` it provides a simpler and cleaner alternative to tmux or screen."
HOMEPAGE="http://www.brain-dump.org/projects/abduco"
COPYRIGHT="2013-2016 Marc Andr√© Tanner"
LICENSE="ISC"
REVISION="2"
SOURCE_URI="http://www.brain-dump.org/projects/abduco/abduco-$portVersion.tar.gz"
CHECKSUM_SHA256="c90909e13fa95770b5afc3b59f311b3d3d2fdfae23f9569fa4f96a3e192a35f4"
PATCHES="abduco-$portVersion.patchset"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	abduco$secondaryArchSuffix = $portVersion
	cmd:abduco = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"

BUILD_PREREQUIRES="
	cmd:gcc$secondaryArchSuffix
	cmd:make
	"

#TEST_REQUIRES="
#	cmd:diff
#	#cmd:pgrep # should patch it to use pidof instead.
#	"

BUILD()
{
	make $jobArgs \
		PREFIX=$prefix \
		MANPREFIX=$manDir \
		LIBS="-lnetwork"
}

INSTALL()
{
	make $jobArgs \
		PREFIX=$prefix \
		MANPREFIX=$manDir \
		install
}

# tests require "cmd:pgrep", can replace with /bin/pidof, but tests hang anyway.
#TEST()
#{
# 	testsuite.sh
#}
