SUMMARY="A genealogy tool written in Java"
DESCRIPTION="Ancestris is a free genealogy software based on NetBeans,\
 compliant with GEDCOM versions 5.5 and 5.5.1."
HOMEPAGE="https://ancestris.org/"
COPYRIGHT="2011-2024 Ancestris"
LICENSE="GNU GPL v3"
REVISION="2"
SOURCE_URI="http://www.ancestris.org/dl/pub/ancestris/releases/ancestris-$portVersion.zip"
CHECKSUM_SHA256="fc443c3907757d80c64282d9e9bebc4a06c0b4b77b9f4881f51f5909a54d4f2f"
SOURCE_DIR="ancestris"

ARCHITECTURES="any"
DISABLE_SOURCE_PACKAGE="true"

PROVIDES="
	ancestris = $portVersion
	"
REQUIRES="
	haiku
	java:runtime == 17
	"

BUILD_REQUIRES="
	haiku_devel
	"
BUILD_PREREQUIRES="
	cmd:find
	"

INSTALL()
{
	mkdir -p $appsDir/ancestris
	cp -R * $appsDir/ancestris/
	find $appsDir/ancestris/ \( -name '*\.exe' -or -name '*\.bat' \) -delete
	cat << EOF > $appsDir/ancestris/ancestris.sh
#!/bin/sh -l
export PATH=\$JRE17_HOME/bin:\$PATH
exec \$(dirname \$(readlink -f \$0))/bin/ancestris
EOF
	chmod 755 $appsDir/ancestris/ancestris.sh \
		$appsDir/ancestris/bin/ancestris

	addAppDeskbarSymlink $appsDir/ancestris/ancestris.sh 'Ancestris'

}
