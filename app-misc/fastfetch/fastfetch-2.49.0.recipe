SUMMARY="Maintained, feature-rich and performance oriented, system information tool"
DESCRIPTION="Fastfetch is a neofetch-like tool for fetching system information \
and displaying it prettily. \
It is written mainly in C, with performance and customizability in mind. \
Currently, Linux, Android, FreeBSD, macOS, SunOS and Windows 7+ are supported."
HOMEPAGE="https://github.com/fastfetch-cli/fastfetch"
COPYRIGHT="2021-2023 Linus Dierheimer
	2022-2025 Carter Li"
LICENSE="MIT"
REVISION="1"
SOURCE_URI="https://github.com/fastfetch-cli/fastfetch/archive/refs/tags/$portVersion.tar.gz"
CHECKSUM_SHA256="5c656581c6cb3061cf8648e2cd0cdf07abcf5f680fdc8bda935deece90b086a0"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

commandSuffix=$secondaryArchSuffix
commandBinDir=$binDir
if [ "$targetArchitecture" = x86_gcc2 ]; then
	commandSuffix=
	commandBinDir=$prefix/bin
fi

PROVIDES="
	fastfetch$secondaryArchSuffix = $portVersion
	cmd:fastfetch$commandSuffix = $portVersion
	cmd:flashfetch$commandSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	hwdata
	lib:libGL$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libdbus_1$secondaryArchSuffix
	devel:libEGL$secondaryArchSuffix
	devel:libelf$secondaryArchSuffix
	devel:libGL$secondaryArchSuffix
	devel:libMagick++_7.Q16HDRI$secondaryArchSuffix
	devel:libopencl$secondaryArchSuffix
	devel:libopencl_headers$secondaryArchSuffix
	devel:libvulkan$secondaryArchSuffix
	devel:libz$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	hwdata
	requests_python310
	cmd:cmake
	cmd:g++$secondaryArchSuffix
	cmd:ninja
	cmd:pkg_config$secondaryArchSuffix
	cmd:python3.10
	"

BUILD()
{
	cmake -B build -S . -G Ninja -DCMAKE_BUILD_TYPE=Release \
		$cmakeDirArgs \
		-DCMAKE_INSTALL_BINDIR=$commandBinDir \
		-DENABLE_EMBEDDED_AMDGPUIDS=ON

	ninja -v -C build $jobArgs
}

INSTALL()
{
	ninja -C build install
}
