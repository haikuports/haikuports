SUMMARY="A project generator tool"
DESCRIPTION="GENie (pronounced as Jenny) is a project generator tool. \
It automagically generates projects from Lua scripts, \
making it easy to apply the same settings to multiple projects."
HOMEPAGE="https://github.com/bkaradzic/GENie"
COPYRIGHT="2014-2018 Branimir Karadžić
	Neil Richardson
	Mike Popoloski
	Drew Solomon
	Ted de Munnik
	Miodrag Milanović
	Brett Vickers
	Bill Freist
	Terry Hendrix II
	Ryan Juckett
	Andrew Johnson
	Johan Sköld
	Alastair Murray
	Patrick Munns
	Jan-Eric Duden
	Phil Stevens
	Stuart Carnie
	Nikolay Aleksiev
	Jon Olson
	Mike Fitzgerald
	Anders Stenberg
	Violets
	Hugo Amnov
	Christian Helmich
	"
LICENSE="BSD (3-clause)"
REVISION="1"
commit_hash="5f5363f79fd0934dfd775af5c097703f0791923f"
SOURCE_URI="$HOMEPAGE/archive/$commit_hash.zip"
CHECKSUM_SHA256="ebc62188f3fb5530613eda2e9886bb06ad8af85028f892873c3df7e65e56bf91"
SOURCE_FILENAME="$commit_hash.zip"
SOURCE_DIR="GENie-$commit_hash"
PATCHES="allow-haiku-build.patch"
ADDITIONAL_FILES="gmake.haiku"

ARCHITECTURES="all !x86_gcc2"

PROVIDES="
	genie = $portVersion
	cmd:genie = $portVersion
	"

REQUIRES="
	haiku
	"

BUILD_REQUIRES="
	haiku_devel
	"

BUILD_PREREQUIRES="
	cmd:gcc
	cmd:make
	cmd:install
	"

BUILD()
{
	cp -R $portDir/additional-files/gmake.haiku build/
	make $jobArgs
}

INSTALL()
{
	mkdir -p $binDir
	install bin/haiku/genie $binDir/genie
	rm bin/haiku/genie
	rm -d bin/haiku
	rm -d bin
}
