From 0720a2932d9364da07dbb1e6b23dfcaf1ea9ec03 Mon Sep 17 00:00:00 2001
From: Peppersawce <michaelpeppers89@yahoo.it>
Date: Fri, 31 Oct 2025 19:20:33 +0100
Subject: Change settings path


diff --git a/Source/utils/paths.cpp b/Source/utils/paths.cpp
index 6253e87..93feaf7 100644
--- a/Source/utils/paths.cpp
+++ b/Source/utils/paths.cpp
@@ -10,6 +10,11 @@
 #include "utils/sdl_ptrs.h"
 #include "utils/stdcompat/optional.hpp"
 
+#ifdef __HAIKU__
+#include <FindDirectory.h>
+#include <fs_info.h>
+#endif
+
 #ifdef __IPHONEOS__
 #include "platform/ios/ios_paths.h"
 #endif
@@ -83,6 +88,11 @@ const std::string &PrefPath()
 		prefPath = FromSDL(IOSGetPrefPath());
 #elif defined(NXDK)
 		prefPath = NxdkGetPrefPath();
+#elif defined(__HAIKU__)
+		char cfgpath[B_PATH_NAME_LENGTH + 10];
+		find_directory(B_USER_SETTINGS_DIRECTORY, dev_for_path("/boot"), false, cfgpath, B_PATH_NAME_LENGTH);
+		strcat(cfgpath, "/devilutionx/");
+		prefPath = strdup(cfgpath);
 #else
 		prefPath = FromSDL(SDL_GetPrefPath("diasurgical", "devilution"));
 #if !defined(__amigaos__)
@@ -102,6 +112,8 @@ const std::string &ConfigPath()
 		configPath = FromSDL(IOSGetPrefPath());
 #elif defined(NXDK)
 		configPath = NxdkGetPrefPath();
+#elif defined(__HAIKU__)
+		configPath = prefPath;
 #else
 		configPath = FromSDL(SDL_GetPrefPath("diasurgical", "devilution"));
 #if !defined(__amigaos__)
-- 
2.51.0
