SUMMARY="A deployment and management system for Lua modules"
DESCRIPTION="LuaRocks allows you to install modules as self-contained \
packages called rocks, which also contain version dependency information."
HOMEPAGE="http://luarocks.org/"
COPYRIGHT="2007-2016 Kepler Project"
LICENSE="MIT"
REVISION="2"
SOURCE_URI="http://luarocks.org/releases/luarocks-$portVersion.tar.gz"
CHECKSUM_SHA256="0e1ec34583e1b265e0fbafb64c8bd348705ad403fe85967fd05d3a659f74d2e5"

ARCHITECTURES="x86_gcc2 x86 x86_64"

PROVIDES="
	luarocks = $portVersion
	cmd:luarocks = $portVersion
	cmd:luarocks_5.3 = $portVersion
	cmd:luarocks_admin = $portVersion
	cmd:luarocks_admin_5.3 = $portVersion
	"
REQUIRES="
	haiku
	lib:liblua
	"
BUILD_REQUIRES="
	haiku_devel
	devel:liblua
	"
BUILD_PREREQUIRES="
	cmd:gcc
	cmd:ld
	cmd:make
	cmd:md5sum
	cmd:sed
	cmd:wget
	"

BUILD()
{
	#not an autotools package
	./configure --prefix=$prefix  \
		--with-lua-include="$includeDir/lua53" \
		--sysconfdir=$settingsDir \
		--rocks-tree=$dataDir/luarocks \
		--versioned-rocks-dir \
		--force-config

	make build $jobArgs
}
INSTALL()
{
	make install
}
