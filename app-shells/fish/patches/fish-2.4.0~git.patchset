From bd247269883a7ee78dfa6e522c893844e7a52aa7 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Zolt=C3=A1n=20Mizsei?= <zmizsei@extrowerk.com>
Date: Wed, 30 Nov 2016 19:46:49 +0100
Subject: [PATCH] Haiku patches

---
 configure.ac                 | 3 +--
 share/functions/open.fish    | 4 ++++
 src/env_universal_common.cpp | 5 +++++
 3 files changed, 10 insertions(+), 2 deletions(-)

diff --git a/configure.ac b/configure.ac
index f655811..4e94386 100644
--- a/configure.ac
+++ b/configure.ac
@@ -250,8 +250,7 @@ AC_DEFINE([NOMACROS], [1], [Define to 1 to disable curses macros that conflict w
 #
 
 # Check for os dependant libraries for all binaries.
-AC_SEARCH_LIBS( connect, socket, , [AC_MSG_ERROR([Cannot find the socket library, needed to build this package.] )] )
-AC_SEARCH_LIBS( nanosleep, rt, , [AC_MSG_ERROR([Cannot find the rt library, needed to build this package.] )] )
+AC_SEARCH_LIBS( connect, [socket network], , [AC_MSG_ERROR([Cannot find the socket library, needed to build this package.] )] )AC_SEARCH_LIBS( nanosleep, rt, , [AC_MSG_ERROR([Cannot find the rt library, needed to build this package.] )] )
 AC_SEARCH_LIBS( shm_open, rt, , [AC_MSG_ERROR([Cannot find the rt library, needed to build this package.] )] )
 AC_SEARCH_LIBS( pthread_create, pthread, , [AC_MSG_ERROR([Cannot find the pthread library, needed to build this package.] )] )
 AC_SEARCH_LIBS( setupterm, [ncurses tinfo curses], , [AC_MSG_ERROR([Could not find a curses implementation, needed to build fish. If this is Linux, try running 'sudo apt-get install libncurses5-dev' or 'sudo yum install ncurses-devel'])] )
diff --git a/share/functions/open.fish b/share/functions/open.fish
index 9eaa7ed..e6c5111 100644
--- a/share/functions/open.fish
+++ b/share/functions/open.fish
@@ -21,6 +21,10 @@ if not command -s open >/dev/null
 			for i in $argv
 				xdg-open $i
 			end
+		else if type -q -f /bin/open
+			for i in $argv
+				/bin/open $i
+			end
 		else
 			echo (_ 'No open utility found. Try installing "xdg-open" or "xdg-utils".')
 		end
diff --git a/src/env_universal_common.cpp b/src/env_universal_common.cpp
index b04968e..319ad1b 100644
--- a/src/env_universal_common.cpp
+++ b/src/env_universal_common.cpp
@@ -43,6 +43,11 @@
 #include <notify.h>
 #endif
 
+#ifdef __HAIKU__
+#define _BSD_SOURCE
+#include <bsd/ifaddrs.h>
+#endif //Haiku
+
 // NAME_MAX is not defined on Solaris and suggests the use of pathconf()
 // There is no obvious sensible pathconf() for shared memory and _XPG_NAME_MAX
 // seems a reasonable choice.
-- 
2.10.2

