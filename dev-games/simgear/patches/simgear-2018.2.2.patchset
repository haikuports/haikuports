From 25558f94a0945f274764800fe36c1bcc8528d1eb Mon Sep 17 00:00:00 2001
From: Ken Mays <kmays2000@gmail.com>
Date: Thu, 4 Oct 2018 11:30:54 +0200
Subject: Haiku fixes for SimGear 2018.2.2


diff --git a/simgear/timing/sg_time.cxx b/simgear/timing/sg_time.cxx
index 83b22ae..ec88ff8 100644
--- a/simgear/timing/sg_time.cxx
+++ b/simgear/timing/sg_time.cxx
@@ -32,9 +32,10 @@
 #include <cstring>
 
 #include <string>
+#include <bsd/time.h>
 
 #ifdef HAVE_SYS_TIME_H
-#  include <sys/time.h>  // for get/setitimer, gettimeofday, struct timeval
+#  include <bsd/time.h>  // for get/setitimer, gettimeofday, struct timeval
 #endif
 #ifdef HAVE_UNISTD_H
 #  include <unistd.h>    // for gettimeofday()
@@ -372,7 +373,7 @@ time_t sgTimeGetGMT(int year, int month, int day, int hour, int min, int sec)
 #if defined(SG_WINDOWS)
     return _mkgmtime(&mt);
 #elif defined( HAVE_TIMEGM )
-    return ( timegm(&mt) );
+    return (time_t(&mt));
 #else
     #error Unix platforms should have timegm
 #endif
-- 
2.19.1


From 9923979f7a1808665197e0dc484d7eacb8d7399b Mon Sep 17 00:00:00 2001
From: kenmays <kmays2000@gmail.com>
Date: Thu, 4 Oct 2018 11:30:54 +0200
Subject: Haiku fixes


diff --git a/simgear/package/md5.c b/simgear/package/md5.c
index 086941a..d925e61 100644
--- a/simgear/package/md5.c
+++ b/simgear/package/md5.c
@@ -18,7 +18,9 @@
  */
 
 
-#include <sys/types.h>
+#include <posix/sys/types.h>
+#include <stdint.h>
+
 #include <string.h>
 
 #include "md5.h"
-- 
2.19.1


From 96c5402bb8cf0185e3013dacce44a02d2f3d47b2 Mon Sep 17 00:00:00 2001
From: Ken Mays <kmays2000@gmail.com>
Date: Thu, 4 Oct 2018 11:30:54 +0200
Subject: Fix unknown HTTP response


diff --git a/simgear/io/HTTPRepository.cxx b/simgear/io/HTTPRepository.cxx
index 690d562..3494508 100644
--- a/simgear/io/HTTPRepository.cxx
+++ b/simgear/io/HTTPRepository.cxx
@@ -90,6 +90,7 @@ namespace simgear
         case HTTPRepository::REPO_ERROR_CANCELLED:   return "cancelled";
         case HTTPRepository::REPO_PARTIAL_UPDATE:   return "partial update (incomplete)";
         }
+       return "response code unknown";
     }
     
 class HTTPRepoPrivate
-- 
2.19.1

diff --git a/simgear/misc/strutils.cxx b/simgear/misc/strutils.cxx
index e8117e6..50753a5 100644
--- a/simgear/misc/strutils.cxx
+++ b/simgear/misc/strutils.cxx
@@ -1017,7 +1017,7 @@ std::string error_string(int errnum)
   retcode = strerror_s(buf, sizeof(buf), errnum);
 #elif defined(_GNU_SOURCE)
   return std::string(strerror_r(errnum, buf, sizeof(buf)));
-#elif (_POSIX_C_SOURCE >= 200112L) || defined(SG_MAC) || defined(__FreeBSD__)
+#elif (_POSIX_C_SOURCE >= 200112L) || defined(SG_MAC) || defined(__HAIKU__) || defined(__FreeBSD__)
   int retcode;
   // POSIX.1-2001 and POSIX.1-2008
   retcode = strerror_r(errnum, buf, sizeof(buf));
diff --git a/simgear/canvas/ShivaVG/src/shDefs.h b/simgear/canvas/ShivaVG/src/shDefs.h
index ee1774b..c6fc111 100644
--- a/simgear/canvas/ShivaVG/src/shDefs.h
+++ b/simgear/canvas/ShivaVG/src/shDefs.h
@@ -163,7 +163,7 @@ SHfloat getMaxFloat();
 
 #if defined(VG_API_LINUX) || defined(VG_API_FREEBSD)
     #include <GL/gl.h>
-    #include <GL/glx.h>
+//    #include <GL/glx.h>
 #elif defined(VG_API_MACOSX)
     #include <OpenGL/gl.h>
 #elif defined(VG_API_WINDOWS)
diff --git a/simgear/canvas/ShivaVG/src/shConfig.h b/simgear/canvas/ShivaVG/src/shConfig.h
index 6ed402e..3c25be2 100644
--- a/simgear/canvas/ShivaVG/src/shConfig.h
+++ b/simgear/canvas/ShivaVG/src/shConfig.h
@@ -26,7 +26,7 @@
     // MacOS
     #define VG_API_MACOSX
 
-#elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
+#elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__) || defined(__HAIKU__)
 
     // FreeBSD
     #define VG_API_FREEBSD
