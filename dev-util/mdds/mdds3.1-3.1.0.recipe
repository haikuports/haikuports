SUMMARY="Multi-Dimensional Data Structure"
DESCRIPTION="mdds is a collection of multi-dimensional data structure \
and indexing algorithms."
HOMEPAGE="https://gitlab.com/mdds/mdds"
COPYRIGHT="2010-2015 Kohei Yoshida et al."
LICENSE="MIT"
REVISION="1"
SOURCE_URI="https://gitlab.com/mdds/mdds/-/archive/$portVersion/mdds-$portVersion.tar.bz2"
CHECKSUM_SHA256="ad5475e0efa1da6648efdceb3c8b50f94ae3a91d0d70845cef93c62c5e5844c1"
SOURCE_DIR="mdds-$portVersion"

ARCHITECTURES="any"

PROVIDES="
	mdds3.1 = $portVersion compat >= 3.0
	devel:mdds = $portVersion compat >= 3.0
	"
if [ "$targetArchitecture" = x86_gcc2 ]; then
	secondaryArchSuffix="_x86"
fi

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"
BUILD_PREREQUIRES="
	cmd:aclocal
	cmd:autoconf
	cmd:automake
	cmd:autoreconf
	cmd:g++$secondaryArchSuffix
	cmd:ld$secondaryArchSuffix
	cmd:make
	cmd:sed
	"

TEST_REQUIRES="
	devel:libboost_system$secondaryArchSuffix >= 1.88.0
	"

BUILD()
{
	if [ "$targetArchitecture" = x86_gcc2 ]; then
		export PATH=$PATH:/bin/x86
	fi
	autoreconf -fi
	runConfigure --omit-dirs docDir ./configure \
		--docdir=$documentationDir/packages/mdds${portVersion%.*}
	make $jobArgs
}

INSTALL()
{
	make install
}

TEST()
{
	make check
}
