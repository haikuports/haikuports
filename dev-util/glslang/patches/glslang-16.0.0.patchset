From 6591f2be7f977d296bfb748b2bb2c0c38cee4a13 Mon Sep 17 00:00:00 2001
From: Augustin Cavalier <waddlesplash@gmail.com>
Date: Wed, 31 Dec 2025 15:37:20 -0500
Subject: HACK: Don't finalize in the command-line tool to avoid
 use-after-frees.


diff --git a/StandAlone/StandAlone.cpp b/StandAlone/StandAlone.cpp
index 7734bb8..3ccaffc 100644
--- a/StandAlone/StandAlone.cpp
+++ b/StandAlone/StandAlone.cpp
@@ -1755,7 +1755,7 @@ int singleMain()
         glslang::FinalizeProcess();    // also test reference counting of users
         glslang::FinalizeProcess();    // also test reference counting of users
         CompileAndLinkShaderFiles(workList);
-        glslang::FinalizeProcess();
+        //glslang::FinalizeProcess();
     } else {
         ShInitialize();
         ShInitialize();  // also test reference counting of users
@@ -1786,7 +1786,7 @@ int singleMain()
             }
         }
 
-        ShFinalize();
+        //ShFinalize();
     }
 
     if (CompileFailed.load())
-- 
2.52.0

