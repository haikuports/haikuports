SUMMARY="binary & source-level backwards compatibility checker"
DESCRIPTION="
ABI Compliance Checker (ACC) is a tool for checking backward binary and \
source-level compatibility of aC/C++ library.  The tool checks header files \
and shared libraries of old and new versions and analyzes changes in API and \
ABI (ABI=API+compiler ABI) that may break binary and/or source compatibility.
"
HOMEPAGE="ispras.linuxbase.org/index.php/ABI_compliance_checker" 
SRC_URI="https://github.com/downloads/lvc/abi-compliance-checker/abi-compliance-checker-1.98.3.tar.gz"
CHECKSUM_MD5="e2ca96bf71b014eefa11fe10a6f7d1f6"
LICENSE="GNU GPL v2"
COPYRIGHT="2009-2010 The Linux Foundation
	2009-2011 Institute for System Programming, RAS
	2011-2012 Nokia Corporation and/or its subsidiary(-ies)
	2011-2012 ROSA Laboratory"
REVISION="1"

ARCHITECTURES="?x86_gcc2 ?x86 ?x86_64"

PROVIDES="
	abi_compliance_checker = $portVersion
	"

REQUIRES="
	haiku >= $haikuVersion
	"

BUILD_REQUIRES="
	haiku_devel >= $haikuVersion
	"

BUILD_PREREQUIRES="
	cmd:sed
	cmd:gcc
	cmd:make
	perl
	"

SOURCE_DIR="abi-compliance-checker-1.98.3"

BUILD()
{
	sed -i 's/linux|freebsd|openbsd|netbsd/linux|freebsd|openbsd|netbsd|haiku/' Makefile.pl
	sed -i 's/$PREFIX\/share\/$TOOL_SNAME/$PREFIX\/data\/$TOOL_SNAME/' Makefile.pl
	sed -i 's/..\/share\/$TOOL_SNAME/..\/data\/$TOOL_SNAME/' Makefile.pl	
}

INSTALL()
{
# TODO: Need to figure out what goes where, as this isn't working
#	mkdir -p $prefix
#	perl Makefile.pl -install $PREFIX=$prefix
#	cp -r $portDir/example-descriptors $dataDir/abi-compliance-checker
}
