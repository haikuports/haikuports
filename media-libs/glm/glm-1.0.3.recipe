SUMMARY="OpenGL Mathematics library"
DESCRIPTION="GLM is a C++ mathematics library for 3D software based on the OpenGL Shading \
Language (GLSL) specification

GLM provides classes and functions designed and implemented with the same naming conventions and \
functionality than GLSL so that anyone who knows GLSL, can use GLM as well in C++.

This project isn't limited to GLSL features. An extension system, based on the GLSL extension \
conventions, provides extended capabilities: matrix transformations, quaternions, data packing, \
random numbers, noise, etc...

This library works perfectly with OpenGL but it also ensures interoperability with other third \
party libraries and SDK. It is a good candidate for software rendering (raytracing / \
rasterisation), image processing, physics simulations and any development context that requires a \
simple and convenient mathematics library."
HOMEPAGE="http://glm.g-truc.net"
COPYRIGHT="2005-2014 G-Truc Creation"
LICENSE="MIT"
REVISION="1"
SOURCE_URI="https://github.com/g-truc/glm/archive/$portVersion.tar.gz"
CHECKSUM_SHA256="6775e47231a446fd086d660ecc18bcd076531cfedd912fbd66e576b118607001"
SOURCE_FILENAME="glm-$portVersion.tar.gz"
SOURCE_DIR="glm-$portVersion"

ARCHITECTURES="ALL !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

portVersionCompat="$portVersion compat >= ${portVersion%%.*}"

PROVIDES="
	glm$secondaryArchSuffix = $portVersion
	lib:libglm$secondaryArchSuffix = $portVersionCompat
	"
REQUIRES="
	haiku$secondaryArchSuffix
	"

PROVIDES_devel="
	glm${secondaryArchSuffix}_devel = $portVersion
	devel:libglm$secondaryArchSuffix = $portVersionCompat
	"
REQUIRES_devel="
	glm$secondaryArchSuffix == $portVersion base
	"

ARCHITECTURES_doc="any"
PROVIDES_doc="
	glm_doc
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"
BUILD_PREREQUIRES="
	cmd:cmake
	cmd:gcc$secondaryArchSuffix
	cmd:make
	"

BUILD()
{
	cmake -B build -S . -DCMAKE_BUILD_TYPE=Release \
		$cmakeDirArgs \
		-DCMAKE_INSTALL_DATAROOTDIR=$libDir/cmake \
		-DBUILD_SHARED_LIBS=ON

	make -C build $jobArgs
}

INSTALL()
{
	make -C build install

	mkdir -p $documentationDir/packages/glm
	cp -r doc/api/* $documentationDir/packages/glm

	prepareInstalledDevelLib \
		libglm

	packageEntries devel \
		$developDir \
		$libDir/cmake

	packageEntries doc \
		$documentationDir
}
