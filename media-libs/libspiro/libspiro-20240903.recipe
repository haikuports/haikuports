SUMMARY="A library that simplifies the drawing of beautiful curves"
DESCRIPTION="LibSpiro is a shared library designed to give programs the \
ability to create smooth continuous curves based on a given set of codes and \
X,Y constraints.

The main user(s) of Libspiro are Font editing programs such as FontForge, and \
forked copies have been seen in more artistic programs such as InkScape, or \
in libraries such as GEGL. There may be other possible uses in future, and \
this library has strong potential in graphical and vector type programs."
HOMEPAGE="https://github.com/fontforge/libspiro"
COPYRIGHT="2007 Raph Levien
	George Williams"
LICENSE="GNU GPL v3"
REVISION="1"
SOURCE_URI="https://github.com/fontforge/libspiro/archive/$portVersion.tar.gz"
CHECKSUM_SHA256="cf0251eb5f3545cce365b727a4a56a2f1292f1ef29245c2045c83e28f8a1df42"

ARCHITECTURES="all"
SECONDARY_ARCHITECTURES="x86"

libVersion="1.0.5"
libVersionCompat="$libVersion compat >= ${libVersion%%.*}"

PROVIDES="
	libspiro$secondaryArchSuffix = $portVersion
	lib:libspiro$secondaryArchSuffix = $libVersionCompat
	"
REQUIRES="
	haiku$secondaryArchSuffix
	"

PROVIDES_devel="
	libspiro${secondaryArchSuffix}_devel = $portVersion
	devel:libspiro$secondaryArchSuffix = $libVersionCompat
	"
REQUIRES_devel="
	libspiro$secondaryArchSuffix == $portVersion base
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"
BUILD_PREREQUIRES="
	cmd:aclocal
	cmd:autoconf
	cmd:awk
	cmd:gcc$secondaryArchSuffix
	cmd:libtoolize$secondaryArchSuffix
	cmd:make
	"

defineDebugInfoPackage libspiro$secondaryArchSuffix \
	$libDir/libspiro.so.$libVersion

BUILD()
{
	autoreconf -vfi
	runConfigure ./configure --disable-static
	make $jobArgs
}

INSTALL()
{
	make install

	# remove libtool file
	rm $libDir/*.la

	prepareInstalledDevelLib libspiro
	fixPkgconfig

	packageEntries devel \
		$developDir \
		$manDir
}

TEST()
{
	make check
}
