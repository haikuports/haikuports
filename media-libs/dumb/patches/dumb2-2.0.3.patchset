From f070794a5b1af3c2b0a5358b1970b4ba156f8ed9 Mon Sep 17 00:00:00 2001
From: begasus <begasus@gmail.com>
Date: Tue, 18 Jun 2019 20:18:46 +0200
Subject: Import upstream patches


diff --git a/CHANGELOG.md b/CHANGELOG.md
index 2a9d999..bc5a181 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -21,6 +21,12 @@
 
 # DUMB Changelog
 
+## v2.0.3, released 30 January 2018
+
+* Fix pattern n_entries calculation, which was broken when attempting to fix the
+  warning incorrectly with long casts, which resulted in n_entries that were horribly
+  inflated, possibly breaking code that didn't expect the change.
+
 ## v2.0.2, released 9 October 2017
 
 * Amended order scanner to also look for blank type patterns that would
diff --git a/include/dumb.h b/include/dumb.h
index f093e68..16eba94 100644
--- a/include/dumb.h
+++ b/include/dumb.h
@@ -114,6 +114,9 @@ typedef off64_t dumb_off_t;
  */
 #include <sys/types.h>
 typedef off64_t dumb_off_t;
+#elif defined __EMSCRIPTEN__
+#include <sys/types.h>
+typedef int64_t dumb_off_t;
 #elif _POSIX_C_SOURCE >= 200112L || _XOPEN_SOURCE >= 500
 #include <sys/types.h>
 typedef off_t dumb_off_t;
diff --git a/pkg-config.pc.in b/pkg-config.pc.in
index c11861c..92a9735 100644
--- a/pkg-config.pc.in
+++ b/pkg-config.pc.in
@@ -7,6 +7,6 @@ Name: DUMB
 Description: DUMB is a module audio renderer library. 
 Version: @DUMB_VERSION@
 URL: https://github.com/kode54/dumb/
-Libs: -L${libdir} -l@PROJECT_NAME@
+Libs: -L${libdir} -ldumb
 Libs.private: -lm
 Cflags: -I${includedir} 
-- 
2.21.0

