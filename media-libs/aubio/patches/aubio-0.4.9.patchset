From e7ecd4dc9d1ffc886c537845ac7d737696fd8638 Mon Sep 17 00:00:00 2001
From: Begasus <begasus@gmail.com>
Date: Sat, 27 Dec 2025 14:20:15 +0100
Subject: applying patch aubio-unversioned-python.patch

Source: https://src.fedoraproject.org/rpms/aubio/blob/rawhide/f/aubio-unversioned-python.patch

diff --git a/tests/create_tests_source.py b/tests/create_tests_source.py
index 1feb144..1843e32 100755
--- a/tests/create_tests_source.py
+++ b/tests/create_tests_source.py
@@ -1,4 +1,4 @@
-#! /usr/bin/env python
+#!/usr/bin/env python3
 
 """ Create a simple stereo file containing a sine tone at 441 Hz, using only
 python's built-in modules. """
diff --git a/tests/wscript_build b/tests/wscript_build
index c99a051..f0e1385 100644
--- a/tests/wscript_build
+++ b/tests/wscript_build
@@ -13,7 +13,7 @@ test_sound_abspath = bld.path.get_bld().make_node(test_sound_target)
 test_sound_abspath = str(test_sound_abspath).replace('\\', '\\\\')
 
 b = bld(name='create_tests_source',
-    rule='python ${SRC} ${TGT}',
+    rule='python3 ${SRC} ${TGT}',
     source='create_tests_source.py',
     target=test_sound_target)
 # use post() to create the task, keep a reference to it
-- 
2.52.0


From 2e7d2a5cf31558bc631c2c67e184a645d32f4b9a Mon Sep 17 00:00:00 2001
From: Paul Brossier <piem@piem.org>
Date: Tue, 25 Jan 2022 18:30:27 +0100
Subject: define FF_API_LAVF_AVCTX for libavcodec > 59, thx @berolinux (closes
 gh-353)


diff --git a/waf b/waf
index 2d548bf..22a69de 100755
--- a/waf
+++ b/waf
@@ -1,4 +1,4 @@
-#!/usr/bin/env python
+#!/usr/bin/env python3
 # encoding: latin-1
 # Thomas Nagy, 2005-2018
 #
-- 
2.52.0


From 3654074f2ea2e24e2456cbe9013691bb5e6bf70e Mon Sep 17 00:00:00 2001
From: Luc Schrijvers <begasus@gmail.com>
Date: Sat, 27 Dec 2025 14:34:30 +0100
Subject: ffmpeg5 patch


diff --git a/src/io/source_avcodec.c b/src/io/source_avcodec.c
index 5b25d85..99615d0 100644
--- a/src/io/source_avcodec.c
+++ b/src/io/source_avcodec.c
@@ -68,6 +68,10 @@
 #define AUBIO_AVCODEC_MAX_BUFFER_SIZE AV_INPUT_BUFFER_MIN_SIZE
 #endif
 
+#if LIBAVCODEC_VERSION_MAJOR >= 59
+#define FF_API_LAVF_AVCTX 1
+#endif
+
 struct _aubio_source_avcodec_t {
   uint_t hop_size;
   uint_t samplerate;
-- 
2.52.0

