From a4233f3a7a8d536107adc69ed9e5e2ba423f7ca2 Mon Sep 17 00:00:00 2001
From: Begasus <begasus@gmail.com>
Date: Wed, 18 Feb 2026 12:32:18 +0100
Subject: build fix for missing: update_desktop_database


diff --git a/meson.build b/meson.build
index d215d56..25f4ffb 100644
--- a/meson.build
+++ b/meson.build
@@ -182,7 +182,7 @@ subdir('docs')
 
 gnome.post_install(
     gtk_update_icon_cache: true,
-    update_desktop_database: true
+    update_desktop_database: false
 )
 
 if build_machine.system() == 'windows' and get_option('buildtype') == 'release'
-- 
2.52.0


From e3b7ede0e3110b6bc50900681fb9f4b921c601fc Mon Sep 17 00:00:00 2001
From: Luc Schrijvers <begasus@gmail.com>
Date: Wed, 18 Feb 2026 17:10:53 +0100
Subject: Move settings to ~/config/settings instead of ~/.


diff --git a/app/app_procs.c b/app/app_procs.c
index 3199a8d..12b441e 100644
--- a/app/app_procs.c
+++ b/app/app_procs.c
@@ -1050,7 +1050,7 @@ create_user_dirs (void)
     return; /* ... and return. Probably removes my one and only FAQ. --HB */
   }
 #endif
-  dir = g_strconcat (g_get_home_dir (), G_DIR_SEPARATOR_S ".dia", NULL);
+  dir = g_strconcat (g_get_home_dir (), G_DIR_SEPARATOR_S "config/settings/dia", NULL);
   if (g_mkdir (dir, 0755) && errno != EEXIST) {
 #ifndef G_OS_WIN32
     g_critical (_("Could not create per-user Dia configuration directory"));
-- 
2.52.0


From aef11bbb75ab664e469ff7372ac97d98f196a1a3 Mon Sep 17 00:00:00 2001
From: Luc Schrijvers <begasus@gmail.com>
Date: Fri, 20 Feb 2026 11:01:30 +0100
Subject: Fix build with poppler25.12


diff --git a/plug-ins/pdf/pdf-import.cpp b/plug-ins/pdf/pdf-import.cpp
index 4579385..79e2fca 100644
--- a/plug-ins/pdf/pdf-import.cpp
+++ b/plug-ins/pdf/pdf-import.cpp
@@ -396,7 +396,7 @@ public :
     if ((pf = strstr (family, " Oblique")) != NULL)
       *pf = 0;
 
-    const double *fm = f->getFontMatrix();
+    const auto& fm = f->getFontMatrix();
     double fsize = state->getTransformedFontSize();
     if (fm[0] != 0)
       fsize *= fabs(fm[3] / fm[0]);
@@ -776,7 +776,11 @@ void
 DiaOutputDev::drawString(GfxState *state, GooString *s)
 {
   Color text_color = this->fill_color;
+#if POPPLER_VERSION_MAJOR > 25 || (POPPLER_VERSION_MAJOR == 25 && POPPLER_VERSION_MINOR >= 10)
+  int len = s->size();
+#else
   int len = s->getLength();
+#endif
   DiaObject *obj;
   gchar *utf8 = NULL;
   DiaFont *font;
-- 
2.52.0

