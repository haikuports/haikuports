From 5fecd8a30ab7088968173b0e6fd64309d985f072 Mon Sep 17 00:00:00 2001
From: Begasus <begasus@gmail.com>
Date: Sat, 25 Nov 2023 11:29:01 +0100
Subject: Silense deprecated warnings


diff --git a/CMakeLists.txt b/CMakeLists.txt
index 32e2840..c4002c9 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -509,6 +509,12 @@ option(KMM_I18N_GENERATION
   "Generate i18n messages and documentation (default=ON)" ON)
 add_feature_info("Internationalization" KMM_I18N_GENERATION "Generation of i18n files (messages and docs)")
 
+################# disable deprecated warnings #################
+
+if (HAIKU)
+    add_definitions(-Wno-deprecated-declarations) # TODO too much spam for now
+endif()
+
 ######################### The Actual Targets ##########################
 set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")
 set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")
-- 
2.48.1


From d804270fd4e811416aed5b0a49cea3acb41a7197 Mon Sep 17 00:00:00 2001
From: Begasus <begasus@gmail.com>
Date: Wed, 6 Aug 2025 16:19:10 +0200
Subject: Fix build for Qt < 6.8


diff --git a/kmymoney/misc/kmm_codec.cpp b/kmymoney/misc/kmm_codec.cpp
index f6695ce..65f9200 100644
--- a/kmymoney/misc/kmm_codec.cpp
+++ b/kmymoney/misc/kmm_codec.cpp
@@ -245,7 +245,7 @@ static QMap<int, QString> mibToName;
 
 QByteArray KMM_Codec::encodingForLocale()
 {
-    QStringDecoder decoder(QLocale::system().name());
+    QStringDecoder decoder(QLocale::system().name().toUtf8());
     if (decoder.isValid()) {
         const auto name = decoder.name();
         if (name) {
@@ -304,7 +304,7 @@ int KMM_Codec::mibForCodecName(const QString& name)
 
 static bool hasEncodingForName(const QString& codecName)
 {
-    return QStringDecoder(codecName).isValid();
+    return QStringDecoder(codecName.toUtf8()).isValid();
 }
 
 #else
diff --git a/kmymoney/plugins/csv/import/core/csvimportercore.cpp b/kmymoney/plugins/csv/import/core/csvimportercore.cpp
index 27dfd6d..0bd1a22 100644
--- a/kmymoney/plugins/csv/import/core/csvimportercore.cpp
+++ b/kmymoney/plugins/csv/import/core/csvimportercore.cpp
@@ -1840,7 +1840,7 @@ void CSVFile::readFile(CSVProfile *profile)
     const QString decodedData = inStream.readAll();
 #else
     const auto encodedData = inFile.readAll();
-    QStringDecoder decoder(KMM_Codec::codecNameForMib(profile->m_encodingMIBEnum));
+    QStringDecoder decoder(KMM_Codec::codecNameForMib(profile->m_encodingMIBEnum).toUtf8());
     const QString decodedData = decoder.decode(encodedData);
 #endif
 
-- 
2.48.1

