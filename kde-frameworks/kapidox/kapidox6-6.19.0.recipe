SUMMARY="Frameworks API Documentation Tools"
DESCRIPTION="This framework contains scripts and data for building API documentation (dox) in \
a standard format and style.
https://api.kde.org holds the result, and this very page is handled by KApiDox too: \
https://api.kde.org/frameworks/kapidox/html/index.html.
The Doxygen tool performs the actual documentation extraction and formatting. This framework \
provides a wrapper script to make generating the documentation more convenient (including reading \
settings from the target framework or other module) and a standard template for the generated \
documentation"
HOMEPAGE="https://invent.kde.org/frameworks/kapidox/"
COPYRIGHT="2010-2024 KDE Organisation"
LICENSE="BSD (2-clause)
	GNU AGPL v3"
REVISION="1"
SOURCE_URI="https://download.kde.org/stable/frameworks/${portVersion%.*}/kapidox-$portVersion.tar.xz"
CHECKSUM_SHA256="7d0e85aed091cf8c725ae4fb965c403a89443a269e539ea3c92b2477f8528c53"
SOURCE_DIR="kapidox-$portVersion"

ARCHITECTURES="any"

pythonVersion="3.10"
pythonPackage=python${pythonVersion//.}

PROVIDES="
	kapidox6 = $portVersion
	cmd:depdiagram_generate_all = $portVersion
	cmd:kapidox_depdiagram_generate = $portVersion
	cmd:kapidox_depdiagram_prepare	= $portVersion
	cmd:kapidox_generate	= $portVersion
	"
REQUIRES="
	haiku
	cmd:python$pythonVersion
	jinja_$pythonPackage
	pyyaml_$pythonPackage
	"

BUILD_REQUIRES="
	haiku_devel
	build_$pythonPackage
	installer_$pythonPackage
	setuptools_$pythonPackage
	wheel_$pythonPackage
	"
BUILD_PREREQUIRES+="
	cmd:python$pythonVersion
	"

INSTALL()
{
	python=python$pythonVersion

	$python -m build --wheel --skip-dependency-check --no-isolation
	$python -m installer -p $prefix dist/*.whl
}
